
> effusion_labs_final@1.0.0 test
> c8 node tools/runner.mjs

üöÄ Launching test runner...
üîç Found 13 test files.

üèóÔ∏è  Performing single Eleventy build...
üóÇ  Archives loaded from "src/content/archives": 88 items (44 products, 4 characters, 40 series)
[11ty] Writing /tmp/eleventy-build/concept-map.json from ./src/concept-map.json.njk
[11ty] Writing /tmp/eleventy-build/feed.xml from ./src/feed.njk
[11ty] Writing /tmp/eleventy-build/index.html from ./src/index.njk
[11ty] Writing /tmp/eleventy-build/map/index.html from ./src/map.njk
[11ty] Writing /tmp/eleventy-build/404.html from ./src/404.njk
[11ty] Writing /tmp/eleventy-build/archives/index.html from ./src/archives/index.njk
[11ty] Writing /tmp/eleventy-build/work/0/index.html from ./src/work/index.njk
[11ty] Writing /tmp/eleventy-build/archives/collectables/index.html from ./src/archives/collectables/index.njk
[11ty] Writing /tmp/eleventy-build/meta/index.html from ./src/content/meta/index.njk
[11ty] Writing /tmp/eleventy-build/archives/collectables/designer-toys/index.html from ./src/archives/collectables/designer-toys/index.njk
[11ty] Writing /tmp/eleventy-build/archives/collectables/designer-toys/pop-mart/index.html from ./src/archives/collectables/designer-toys/pop-mart/index.njk
[11ty] Writing /tmp/eleventy-build/archives/collectables/designer-toys/pop-mart/the-monsters/index.html from ./src/archives/collectables/designer-toys/pop-mart/the-monsters/index.njk
[11ty] Writing /tmp/eleventy-build/work/index.html from ./src/work.njk
[11ty] Writing /tmp/eleventy-build/content/concepts/aesthetic-inquiry/index.html from ./src/content/concepts/aesthetic-inquiry.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/atlas-process/index.html from ./src/content/concepts/atlas-process.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/autocatalytic-system/index.html from ./src/content/concepts/autocatalytic-system.md (njk)
[11ty] Writing /tmp/eleventy-build/work/block-ledger/index.html from ./src/content/concepts/block-ledger.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/compliant-spire/index.html from ./src/content/concepts/compliant-spire.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/ghost-byline/index.html from ./src/content/concepts/ghost-byline.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/ghost-engine/index.html from ./src/content/concepts/ghost-engine.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/parroting-mimicry/index.html from ./src/content/concepts/parroting-mimicry.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/readers-journey/index.html from ./src/content/concepts/readers-journey.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/rhizomatic-protocol/index.html from ./src/content/concepts/rhizomatic-protocol.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/three-studies-sensory/index.html from ./src/content/concepts/three-studies-sensory.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/verification-is-an-ecology/index.html from ./src/content/concepts/verification-is-an-ecology.md (njk)
[11ty] Writing /tmp/eleventy-build/content/concepts/workshop-weather/index.html from ./src/content/concepts/workshop-weather.md (njk)
[11ty] Writing /tmp/eleventy-build/content/meta/a-b-curatorial-protocolist/index.html from ./src/content/meta/a-b-curatorial-protocolist.md (njk)
[11ty] Writing /tmp/eleventy-build/content/meta/core-concept/index.html from ./src/content/meta/core-concept.md (njk)
[11ty] Writing /tmp/eleventy-build/content/meta/curatorial-generativism/index.html from ./src/content/meta/curatorial-generativism.md (njk)
[11ty] Writing /tmp/eleventy-build/content/meta/methodology/index.html from ./src/content/meta/methodology.md (njk)
[11ty] Writing /tmp/eleventy-build/content/meta/protocolist/index.html from ./src/content/meta/protocolist.md (njk)
[11ty] Writing /tmp/eleventy-build/content/meta/style-guide/index.html from ./src/content/meta/style-guide.md (njk)
[11ty] Writing /tmp/eleventy-build/content/meta/unified-referencing-syntax/index.html from ./src/content/meta/unified-referencing-syntax.md (njk)
[11ty] Writing /tmp/eleventy-build/content/projects/project-dandelion/index.html from ./src/content/projects/project-dandelion.md (njk)
[11ty] Writing /tmp/eleventy-build/content/sparks/academic-blindness/index.html from ./src/content/sparks/academic-blindness.md (njk)
[11ty] Writing /tmp/eleventy-build/content/sparks/breakfast-eggs/index.html from ./src/content/sparks/breakfast-eggs.md (njk)
[11ty] Writing /tmp/eleventy-build/content/sparks/george-eastman-obscure/index.html from ./src/content/sparks/george-eastman-obscure.md (njk)
[11ty] Writing /tmp/eleventy-build/content/sparks/illusion-japan-nicotine/index.html from ./src/content/sparks/illusion-japan-nicotine.md (njk)
[11ty] Writing /tmp/eleventy-build/content/sparks/murakami-market-analysis-2025/index.html from ./src/content/sparks/murakami-market-analysis-2025.md (njk)
[11ty] Writing /tmp/eleventy-build/content/sparks/paulin-paulin-paulin-marketing/index.html from ./src/content/sparks/paulin-paulin-paulin-marketing.md (njk)
[11ty] Writing /tmp/eleventy-build/content/sparks/smoker-sysadmin/index.html from ./src/content/sparks/smoker-sysadmin.md (njk)
[11ty] Writing /tmp/eleventy-build/content/sparks/vapor-linked-governance/index.html from ./src/content/sparks/vapor-linked-governance.md (njk)
[11ty] Writing /tmp/eleventy-build/work/drop/index.html from ./src/work/drop.11ty.js
[11ty] Writing /tmp/eleventy-build/work/latest/index.html from ./src/work/latest.11ty.js
[11ty] Writing /tmp/eleventy-build/concepts/index.html from ./src/content/concepts/index.njk
[11ty] Writing /tmp/eleventy-build/projects/index.html from ./src/content/projects/index.njk
[11ty] Writing /tmp/eleventy-build/sparks/index.html from ./src/content/sparks/index.njk
[11ty] Writing /tmp/eleventy-build/work/1/index.html from ./src/work/index.njk
[11ty] Copied 11 Wrote 48 files in 6.51 seconds (135.6ms each, v3.1.2)
‚úÖ Eleventy build complete.

üß™ Running 13 tests...
TAP version 13
# Subtest: callout merges footnotes into page pipeline
ok 1 - callout merges footnotes into page pipeline
  ---
  duration_ms: 22.633776
  type: 'test'
  ...
# Subtest: defines improved background colors
ok 2 - defines improved background colors
  ---
  duration_ms: 8.4537
  type: 'test'
  ...
# Subtest: text contrast meets WCAG AA
ok 3 - text contrast meets WCAG AA
  ---
  duration_ms: 1.800525
  type: 'test'
  ...
# Subtest: tailwind exposes readable font families
ok 4 - tailwind exposes readable font families
  ---
  duration_ms: 0.755877
  type: 'test'
  ...
# Subtest: includes fluid type scale tokens
ok 5 - includes fluid type scale tokens
  ---
  duration_ms: 0.557138
  type: 'test'
  ...
# Subtest: footnote popover separates source line
ok 6 - footnote popover separates source line
  ---
  duration_ms: 259.367782
  type: 'test'
  ...
# Subtest: projects computed picks latest entries by date
ok 7 - projects computed picks latest entries by date
  ---
  duration_ms: 4.843498
  type: 'test'
  ...
# node:internal/modules/esm/resolve:313
#   return new ERR_PACKAGE_PATH_NOT_EXPORTED(
#          ^
# Error [ERR_PACKAGE_PATH_NOT_EXPORTED]: Package subpath './package.json' is not defined by "exports" in /workspace/effusion-labs/node_modules/@photogabble/eleventy-plugin-interlinker/package.json
#     at exportsNotFound (node:internal/modules/esm/resolve:313:10)
#     at packageExportsResolve (node:internal/modules/esm/resolve:660:9)
#     at resolveExports (node:internal/modules/cjs/loader:646:36)
#     at Function._findPath (node:internal/modules/cjs/loader:713:31)
#     at Function._resolveFilename (node:internal/modules/cjs/loader:1351:27)
#     at Function.resolve (node:internal/modules/helpers:145:19)
#     at file:///workspace/effusion-labs/test/unit/interlinker-guard.test.mjs:7:25
#     at ModuleJob.run (node:internal/modules/esm/module_job:343:25)
#     at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:647:26)
#     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
#   code: 'ERR_PACKAGE_PATH_NOT_EXPORTED'
# }
# Node.js v22.18.0
# Subtest: test/unit/interlinker-guard.test.mjs
not ok 5 - test/unit/interlinker-guard.test.mjs
  ---
  duration_ms: 401.831954
  type: 'test'
  location: '/workspace/effusion-labs/test/unit/interlinker-guard.test.mjs:1:1'
  failureType: 'testCodeFailure'
  exitCode: 1
  signal: ~
  error: 'test failed'
  code: 'ERR_TEST_FAILURE'
  ...
# Subtest: keepalive emits heartbeat to stderr
ok 9 - keepalive emits heartbeat to stderr
  ---
  duration_ms: 6245.291879
  type: 'test'
  ...
# Subtest: keepalive ignores first SIGINT
ok 10 - keepalive ignores first SIGINT
  ---
  duration_ms: 261.425912
  type: 'test'
  ...
# Subtest: gateway reads SOLVER_URL from environment
ok 11 - gateway reads SOLVER_URL from environment
  ---
  duration_ms: 11.521232
  type: 'test'
  ...
# Subtest: gateway retains default solver URL
ok 12 - gateway retains default solver URL
  ---
  duration_ms: 0.511617
  type: 'test'
  ...
# Subtest: external link renders with arrow and class
ok 13 - external link renders with arrow and class
  ---
  duration_ms: 23.121395
  type: 'test'
  ...
# Subtest: internal link keeps text without external markers
ok 14 - internal link keeps text without external markers
  ---
  duration_ms: 2.639652
  type: 'test'
  ...
# Subtest: external link starting with arrow does not duplicate
ok 15 - external link starting with arrow does not duplicate
  ---
  duration_ms: 3.636943
  type: 'test'
  ...
# Subtest: node shim version matches system node
ok 16 - node shim version matches system node
  ---
  duration_ms: 140.02093
  type: 'test'
  ...
# Subtest: node shim is executable
ok 17 - node shim is executable
  ---
  duration_ms: 1.341927
  type: 'test'
  ...
# Subtest: node shim lacks llm-constants reference
ok 18 - node shim lacks llm-constants reference
  ---
  duration_ms: 0.877931
  type: 'test'
  ...
# Subtest: prettier pinned version and format script
ok 19 - prettier pinned version and format script
  ---
  duration_ms: 8.328895
  type: 'test'
  ...
# Subtest: merges tag-like metadata into unified tags and categories
ok 20 - merges tag-like metadata into unified tags and categories
  ---
  duration_ms: 15.058049
  type: 'test'
  ...
# Subtest: deduplicates tag values
ok 21 - deduplicates tag values
  ---
  duration_ms: 0.882401
  type: 'test'
  ...
# Subtest: categories returns empty array when spark_type absent
ok 22 - categories returns empty array when spark_type absent
  ---
  duration_ms: 0.46489
  type: 'test'
  ...
# Subtest: ordinalSuffix handles basic single-digit numbers
ok 23 - ordinalSuffix handles basic single-digit numbers
  ---
  duration_ms: 3.243788
  type: 'test'
  ...
# Subtest: ordinalSuffix handles negative numbers correctly
ok 24 - ordinalSuffix handles negative numbers correctly
  ---
  duration_ms: 0.699104
  type: 'test'
  ...
# Subtest: ordinalSuffix uses "th" for all teen numbers
ok 25 - ordinalSuffix uses "th" for all teen numbers
  ---
  duration_ms: 0.482922
  type: 'test'
  ...
# Subtest: ordinalSuffix returns a valid suffix for all days in a month
ok 26 - ordinalSuffix returns a valid suffix for all days in a month
  ---
  duration_ms: 0.634938
  type: 'test'
  ...
# Subtest: readFileCached returns null for a nonexistent file path
ok 27 - readFileCached returns null for a nonexistent file path
  ---
  duration_ms: 1.043099
  type: 'test'
  ...
# Subtest: GitHub workflows use latest action versions
ok 28 - GitHub workflows use latest action versions
  ---
  duration_ms: 10.40001
  type: 'test'
  ...
1..28
# tests 28
# suites 0
# pass 27
# fail 1
# cancelled 0
# skipped 0
# todo 0
# duration_ms 8524.613087
