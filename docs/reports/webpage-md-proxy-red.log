
> effusion_labs_final@1.0.0 test
> node tools/test-changed.mjs

Running tests (related to changes):
test/filters.test.js
TAP version 13
# Subtest: readableDate formats correctly
ok 1 - readableDate formats correctly
  ---
  duration_ms: 20.850834
  type: 'test'
  ...
# Subtest: htmlDateString formats correctly
ok 2 - htmlDateString formats correctly
  ---
  duration_ms: 0.284035
  type: 'test'
  ...
# Subtest: limit returns subset
ok 3 - limit returns subset
  ---
  duration_ms: 0.886803
  type: 'test'
  ...
# Subtest: jsonify serializes pages
ok 4 - jsonify serializes pages
  ---
  duration_ms: 0.435055
  type: 'test'
  ...
# Subtest: readingTime estimates minutes
ok 5 - readingTime estimates minutes
  ---
  duration_ms: 0.257973
  type: 'test'
  ...
# Subtest: slugify generates URL-friendly strings
ok 6 - slugify generates URL-friendly strings
  ---
  duration_ms: 0.246548
  type: 'test'
  ...
# Subtest: truncate shortens strings with ellipsis
ok 7 - truncate shortens strings with ellipsis
  ---
  duration_ms: 0.205413
  type: 'test'
  ...
# Subtest: shout uppercases text
ok 8 - shout uppercases text
  ---
  duration_ms: 0.1222
  type: 'test'
  ...
# Subtest: shout is idempotent
ok 9 - shout is idempotent
  ---
  duration_ms: 0.405974
  type: 'test'
  ...
# Subtest: htmlToMarkdown converts fixture HTML
ok 10 - htmlToMarkdown converts fixture HTML
  ---
  duration_ms: 98.392911
  type: 'test'
  ...
# Subtest: webpageToMarkdown filter fetches and converts HTML
not ok 11 - webpageToMarkdown filter fetches and converts HTML
  ---
  duration_ms: 12.083845
  type: 'test'
  location: '/workspace/effusion-labs/test/filters.test.js:67:1'
  failureType: 'testCodeFailure'
  error: 'http is not defined'
  code: 'ERR_TEST_FAILURE'
  name: 'ReferenceError'
  stack: |-
    TestContext.<anonymous> (/workspace/effusion-labs/test/filters.test.js:71:18)
    Test.runInAsyncScope (node:async_hooks:214:14)
    Test.run (node:internal/test_runner/test:1047:25)
    Test.processPendingSubtests (node:internal/test_runner/test:744:18)
    Test.postRun (node:internal/test_runner/test:1173:19)
    Test.run (node:internal/test_runner/test:1101:12)
    async Test.processPendingSubtests (node:internal/test_runner/test:744:7)
  ...
# Subtest: webpageToMarkdown bypasses proxy for localhost
not ok 12 - webpageToMarkdown bypasses proxy for localhost
  ---
  duration_ms: 0.210088
  type: 'test'
  location: '/workspace/effusion-labs/test/filters.test.js:83:1'
  failureType: 'testCodeFailure'
  error: 'http is not defined'
  code: 'ERR_TEST_FAILURE'
  name: 'ReferenceError'
  stack: |-
    TestContext.<anonymous> (/workspace/effusion-labs/test/filters.test.js:85:18)
    Test.runInAsyncScope (node:async_hooks:214:14)
    Test.run (node:internal/test_runner/test:1047:25)
    Test.processPendingSubtests (node:internal/test_runner/test:744:18)
    Test.postRun (node:internal/test_runner/test:1173:19)
    Test.run (node:internal/test_runner/test:1101:12)
    async Test.processPendingSubtests (node:internal/test_runner/test:744:7)
  ...
1..12
# tests 12
# suites 0
# pass 10
# fail 2
# cancelled 0
# skipped 0
# todo 0
# duration_ms 793.328561
