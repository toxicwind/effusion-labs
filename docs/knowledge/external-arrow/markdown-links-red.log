
> effusion_labs_final@1.0.0 test:guard
> bash scripts/test-with-guardrails.sh

npm warn Unknown env config "http-proxy". This will stop working in the next major version of npm.

> effusion_labs_final@1.0.0 test
> c8 --reporter=text-summary --reporter=lcov node tools/runner.mjs

✖ external link renders with arrow and class (33.247618ms)
✔ internal link keeps text without external markers (2.462771ms)
✔ external link starting with arrow does not duplicate (2.418675ms)
ℹ tests 3
ℹ suites 0
ℹ pass 2
ℹ fail 1
ℹ cancelled 0
ℹ skipped 0
ℹ todo 0
ℹ duration_ms 475.187897

✖ failing tests:

test at test/unit/markdown-links.test.mjs:9:7
✖ external link renders with arrow and class (33.247618ms)
  AssertionError [ERR_ASSERTION]: The expression evaluated to a falsy value:
  
    assert.ok(html.includes('>↗ Example<'))
  
      at TestContext.<anonymous> (file:///workspace/effusion-labs/test/unit/markdown-links.test.mjs:14:10)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1047:25)
      at Test.start (node:internal/test_runner/test:944:17)
      at startSubtestAfterBootstrap (node:internal/test_runner/harness:296:17)
      at async file:///workspace/effusion-labs/test/unit/markdown-links.test.mjs:9:1 {
    generatedMessage: true,
    code: 'ERR_ASSERTION',
    actual: false,
    expected: true,
    operator: '=='
  }
Executed 1 tests

=============================== Coverage summary ===============================
Statements   : 86.82% ( 112/129 )
Branches     : 59.25% ( 16/27 )
Functions    : 100% ( 8/8 )
Lines        : 86.82% ( 112/129 )
================================================================================
