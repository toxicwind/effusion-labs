HEADER
Summary: Extended PostCSS pipeline and Eleventy config to build overlay CSS and ship icons【F:lib/postcss.js†L58-L69】【F:lib/eleventy/register.mjs†L137-L142】【F:lib/eleventy/register.mjs†L156-L160】
Tags: Scope=S2 • Approach=A4 • Novelty=N1,N5 • Skin=K2
Diff: 5 files changed, 23 insertions(+), 3 deletions(-)
Files: lib/postcss.js, lib/eleventy/register.mjs, src/styles/app.tailwind.css, src/assets/icons/apple-touch-icon.png, src/assets/icons/favicon.svg
Checks: tests: pass, build: pass, icons: pass
Dev URL: –
Commit: feat(build): compile overlay CSS and add icons
Worklog: artifacts/worklogs/20250828T025101Z.md
Report: artifacts/reports/20250828T025101Z.md
Web Insights: Generated apple-touch icon via placehold.co placeholder API.
Risk: low

WHAT CHANGED
- Added batch PostCSS helper in lib/postcss.js: compile multiple styles【F:lib/postcss.js†L58-L69】
- Composed Eleventy build in lib/eleventy/register.mjs: copy icons and compile overlay【F:lib/eleventy/register.mjs†L137-L142】【F:lib/eleventy/register.mjs†L156-L160】
- Removed overlay import in src/styles/app.tailwind.css: avoid duplicate CSS【F:src/styles/app.tailwind.css†L2-L5】
- Web-Integrated neon icons in src/assets/icons: fill missing favicon and touch icon【F:src/assets/icons/favicon.svg†L1-L4】

EDIT CARDS
- Path: lib/postcss.js
  Ops: [Compose]
  Anchors: runPostcssAll()
  Before → After: single-file PostCSS → batch-processing helper.
  Micro Example: await runPostcssAll([{ src: "a.css", dest: "b.css" }]);
  Impact: Enables concise multi-file style compilation.
- Path: lib/eleventy/register.mjs
  Ops: [Compose]
  Anchors: runPostcssAll, addPassthroughCopy
  Before → After: processed one CSS and no icons → builds overlay and ships icons.
  Micro Example: eleventyConfig.addPassthroughCopy({ "src/assets/icons": "assets/icons" });
  Impact: Overlay CSS and icons reach the output bundle.
- Path: src/styles/app.tailwind.css
  Ops: [Normalize]
  Anchors: imports
  Before → After: overlay bundled inside → overlay built separately.
  Micro Example: imports now stop at tokens.css and tailwind layers.
  Impact: Prevents duplicated overlay styles.
- Path: src/assets/icons/favicon.svg
  Ops: [Aestheticize]
  Anchors: <rect/>
  Before → After: missing icon → neon “EL” square.
  Micro Example: <rect width="64" height="64" rx="8" fill="#00FF41"/>
  Impact: Browsers now display a branded favicon.
- Path: src/assets/icons/apple-touch-icon.png
  Ops: [Aestheticize]
  Anchors: neon placeholder
  Before → After: no apple-touch icon → green “EL” PNG.
  Micro Example: binary 180×180 neon PNG.
  Impact: iOS home screens show the site badge.

CHECKS & EVIDENCE
- Name: tests
  Location: ✅ npm test
  Expectation: repository scripts run without errors.
  Micro Example: index.js                  |   96.66 |       75 |     100 |   96.66 | 31-32【0d4750†L2】
  Verdict: pass
- Name: build
  Location: ✅ npm run build
  Expectation: generates site assets.
  Micro Example: ✅ Eleventy build completed. Generated 48 files.【a54524†L22】
  Verdict: pass
- Name: icons
  Location: ✅ ls _site/assets/icons
  Expectation: apple-touch-icon.png and favicon.svg present.
  Micro Example: apple-touch-icon.png  favicon.svg【399f97†L2】
  Verdict: pass

DECISIONS
- Strategy Justification: A4 chosen to hook Eleventy config without changing templates; S2 fits small asset pipeline tweak; N1 adds reusable PostCSS batch helper while N5 drops neon icons.
- Assumptions: Placeholder icons are acceptable and overlay CSS should be a standalone asset.
- Discarded Alternatives: Considered copying overlay file directly but preferred PostCSS batch for reusability.
- Pivots & Failures: tree command's spinner crashed; hype_run wrapper failed so tests ran via plain npm.
- Rollback: revert commit feat(build): compile overlay CSS and add icons.

CAPABILITY
- Name: runPostcssAll(entries)
- Defaults: Processes no files when entries is empty.
- Usage: await runPostcssAll([{ src: "src/styles/foo.css", dest: "src/assets/css/foo.css" }]);

AESTHETIC CAPSULE
⚡ Neon overlays mesh with new icons — the site glows clean.
