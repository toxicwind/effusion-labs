# Icons Fix Report 2025-09-06T074656Z

## Summary
Fixed broken lucide icons sitewide by replacing the Eleventy filter with a server-side SVG renderer compatible with lucide@0.542. Ensures nav icons (brand, menu, sun/moon) render and dark/light toggle visuals switch correctly.

## Root Cause
The code imported `{ icons } from 'lucide'` and called `.toSvg`, which no longer exists in lucide@0.542. The exported `icons` object now uses PascalCase keys and icon nodes (arrays), not objects with `.toSvg`.

## Solution
- Added import of `defaultAttributes` from lucide ESM.
- Implemented kebab/underscoreâ†’PascalCase key mapping.
- Rendered inline SVG strings from lucide icon node arrays; merged defaultAttributes with passed attrs.
- Left Iconify web component support intact for prefixed sets (e.g., mdi:*, heroicons:*).

## Verification
- Built with `npm run build`.
- Grepped output for inline SVG in header and links (flask-conical, menu, sun, moon, external-link).
- Confirmed theme-toggle.js toggles icon visibility via `.hidden`.

## Risk
Low: Pure server-side rendering change; no client API changes.

## Follow-ups
- Consider a small unit test for the filter.
- Optionally add a config flag to force Iconify for all icons.
