@layer utilities {
  /* Neon spectrum band */
  .hb-neon {
    --hb-g1: var(--spec-a, #00E0FF);
    --hb-g2: var(--spec-c, #FF1CF7);
    background-image: linear-gradient(120deg, color-mix(in oklab, var(--hb-g1), transparent 10%), color-mix(in oklab, var(--hb-g2), transparent 10%));
  }

  /* Intensity knobs */
  .hb-intensity-lite { --hb-shadow-a: .28; --hb-rail-a: .45; }
  .hb-intensity-bold { --hb-shadow-a: .52; --hb-rail-a: .8; }

  /* Accent rail (left) */
  .hb-accent { position: relative; }
  .hb-accent::before {
    content: "";
    position: absolute; inset: 0 auto 0 -1px; width: var(--spec-rail-w, 3px);
    background: var(--spectrum, linear-gradient(180deg,#00E0FF,#9AFF00 33%,#FF1CF7 66%,#FFC700));
    opacity: var(--spec-alpha, .35);
    pointer-events: none;
  }

  /* Inlay surface for neon bands */
  .hb-inlay {
    background: color-mix(in oklab, hsl(var(--b1)) 80%, hsl(var(--b2)) 20%);
    border-radius: .8rem;
    box-shadow:
      0 0 0 2px color-mix(in oklab, hsl(var(--b3)) 70%, transparent),
      0 10px 24px rgba(0,0,0,.20);
    backdrop-filter: saturate(120%) blur(6px);
  }

  /* Ink helpers on neon */
  .hb-ink { color: hsl(var(--bc)); }
  .hb-ink-soft { color: color-mix(in oklab, hsl(var(--bc)) 80%, transparent); }

  /* Brutalist, stacked hard shadow */
  .hb-shadow-brut {
    box-shadow:
      6px 6px 0 0 rgba(0,0,0, calc(var(--hb-shadow-a, .32))),
      0 0 0 2px rgba(0,0,0,.85);
  }
  .hb-shadow-brut:hover { box-shadow:
      8px 8px 0 0 rgba(0,0,0, calc(var(--hb-shadow-a, .32))),
      0 0 0 2px rgba(0,0,0,.9);
    transform: translate(-1px,-1px);
  }

  /* Beveled edge illusion */
  .hb-bevel {
    background-image:
      linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.06));
  }

  /* Card preset that pops */
  .hb-brut-card {
    border-radius: .75rem;
    border: 2px solid hsl(var(--b3));
    background: linear-gradient(135deg, hsl(var(--b2)) 0%, hsl(var(--b1)) 100%);
    box-shadow:
      0 1px 0 rgba(255,255,255,.04) inset,
      0 14px 28px rgba(0,0,0, calc(.18 + var(--hb-shadow-a, .28)));
    transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
  }
  .hb-brut-card:hover { transform: translateY(-2px); box-shadow:
      0 1px 0 rgba(255,255,255,.04) inset,
      0 18px 34px rgba(0,0,0, calc(.22 + var(--hb-shadow-a, .28)));
  }

  /* Panel for code/mockups */
  .hb-brut-panel {
    border: 2px solid color-mix(in oklab, hsl(var(--p)) 40%, hsl(var(--b3)) 60%);
    background: linear-gradient(160deg, hsl(var(--b3)) 0%, hsl(var(--b2)) 100%);
    box-shadow: 0 12px 24px rgba(0,0,0,.32);
  }

  /* Plasma glow for primary CTAs */
  .hb-plasma {
    text-shadow: 0 1px 0 rgba(0,0,0,.35);
    box-shadow:
      0 0 0 2px rgba(0,0,0,.8),
      0 10px 22px color-mix(in oklab, hsl(var(--p)) 35%, transparent);
  }
  .hb-plasma:hover { box-shadow:
      0 0 0 2px rgba(0,0,0,.85),
      0 14px 28px color-mix(in oklab, hsl(var(--p)) 45%, transparent);
  }

  /* Energetic page grid */
  .hb-grid {
    background-image:
      radial-gradient(circle at 2px 2px, rgba(0,255,65,.18) 1.2px, transparent 0),
      linear-gradient(to right, rgba(255,255,255,.05) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255,255,255,.05) 1px, transparent 1px);
    background-size: 40px 40px, 20px 20px, 20px 20px;
  }

  /* Micro motion */
  .hb-anim { transition: transform .18s ease, box-shadow .18s ease; }
  .hb-overflow-visible { overflow: visible !important; }

  /* Logo: spectrum ring + hard shadow */
  .hb-logo { width: 2.5rem; height: 2.5rem; padding: 2px; border-radius: 9999px; display: inline-flex; align-items: center; justify-content: center; background: conic-gradient(from 120deg, var(--spec-a,#00E0FF), var(--spec-c,#FF1CF7), var(--spec-d,#FFC700)); box-shadow: 4px 4px 0 rgba(0,0,0,.7); }
  .hb-logo-core { width: 100%; height: 100%; border-radius: 9999px; display: inline-flex; align-items: center; justify-content: center; background: hsl(var(--p)); color: #000; font-weight: 800; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace; }

  /* Page background FX */
  .hb-blobs { position: relative; }
  .hb-blobs::before, .hb-blobs::after { content: ""; position: fixed; inset: auto auto 10% -10%; width: 40vmax; height: 40vmax; border-radius: 50%; filter: blur(60px); opacity: .12; pointer-events: none; z-index: 0; }
  .hb-blobs::before { inset: 5% -10% auto auto; background: radial-gradient(circle at 30% 30%, color-mix(in oklab, hsl(var(--p)) 60%, transparent), transparent 60%); }
  .hb-blobs::after  { inset: auto auto -10% 50%; background: radial-gradient(circle at 60% 40%, color-mix(in oklab, hsl(var(--a)) 60%, transparent), transparent 60%); }
  .hb-vignette::after { content: ""; position: fixed; inset: 0; box-shadow: inset 0 0 120px rgba(0,0,0,.35); pointer-events: none; z-index: 0; }
  .hb-noise::after { content: ""; position: fixed; inset: 0; background-image: repeating-linear-gradient(0deg, rgba(255,255,255,.02) 0 1px, transparent 1px 2px), repeating-linear-gradient(90deg, rgba(255,255,255,.02) 0 1px, transparent 1px 2px); mix-blend-mode: overlay; pointer-events: none; z-index: 0; }

  /* Code shell helpers */
  .hb-code-pre { white-space: pre; word-break: normal; overflow-wrap: normal; }
  .hb-code-toolbar { position: absolute; top: .5rem; right: .5rem; display: inline-flex; gap: .35rem; opacity: .85; }
  .hb-code-pill { font-size: .75rem; line-height: 1; padding: .25rem .4rem; border-radius: .35rem; background: hsl(var(--b1)); color: hsl(var(--bc)); box-shadow: 0 1px 0 rgba(255,255,255,.06) inset, 2px 2px 0 rgba(0,0,0,.6); border: 1px solid hsl(var(--b3)); }

  /* Stronger layered background */
  .hb-bg-hyper {
    background-color: hsl(var(--b2));
    background-image:
      radial-gradient(1200px 700px at 110% 10%, color-mix(in oklab, hsl(var(--a)) 22%, transparent), transparent 70%),
      radial-gradient(1000px 600px at 10% -10%, color-mix(in oklab, hsl(var(--p)) 26%, transparent), transparent 72%),
      radial-gradient(900px 600px at 50% 120%, color-mix(in oklab, hsl(var(--s)) 16%, transparent), transparent 78%),
      repeating-linear-gradient(0deg, rgba(255,255,255,.045) 0 1px, transparent 1px 36px),
      repeating-linear-gradient(90deg, rgba(255,255,255,.045) 0 1px, transparent 1px 36px);
    background-attachment: fixed, fixed, fixed, scroll, scroll;
  }

  /* Spectrum underline for headings */
  .hb-underline { position: relative; display: inline-block; padding-bottom: .35rem; }
  .hb-underline::after {
    content: ""; position: absolute; left: 0; bottom: 0; height: var(--spec-underline-w,2px);
    width: clamp(5rem, 10vw, 10rem);
    background: var(--spectrum, linear-gradient(90deg,#00E0FF,#FF1CF7));
    opacity: .9;
  }

  /* Field chrome: brutalist hard edge */
  .hb-field { box-shadow: 3px 3px 0 0 rgba(0,0,0,.55); border-width: 2px !important; }
  .hb-field:focus { box-shadow: 4px 4px 0 0 rgba(0,0,0,.6); }

  /* Top rail (spectrum) */
  .hb-accent-top { position: relative; }
  .hb-accent-top::before {
    content: ""; position: absolute; inset: -1px 0 auto 0; height: var(--spec-rail-w,3px);
    background: var(--spectrum, linear-gradient(90deg,#00E0FF,#FF1CF7));
    opacity: var(--spec-alpha, .35);
    pointer-events: none;
  }

  /* Striped neutral banding */
  .hb-stripes {
    background-image: repeating-linear-gradient(135deg, rgba(255,255,255,.035) 0 6px, transparent 6px 14px);
  }

  /* Stat card: outlined numerals + scan bar */
  .hb-stat-card { position: relative; overflow: hidden; }
  .hb-num-outline {
    text-shadow:
      1px 1px 0 rgba(0,0,0,.65), -1px -1px 0 rgba(0,0,0,.35),
      1px -1px 0 rgba(0,0,0,.45), -1px 1px 0 rgba(0,0,0,.45);
    letter-spacing: -0.02em;
  }
  .hb-scanbar { height: 4px; background: var(--spectrum, linear-gradient(90deg,#00E0FF,#FF1CF7)); border-radius: 2px; opacity: .9; }
}
