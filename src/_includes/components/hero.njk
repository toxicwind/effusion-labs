{# components/hero.njk #}
{% from "components/hero-tile.njk" import heroTile %}

<header class="hero relative mx-auto w-full hb-neon hb-intensity-bold">
  <div class="container-fluid px-4 sm:px-6 lg:px-8 py-[clamp(3rem,8vh,9rem)]">
    <div class="hb-inlay mx-auto max-w-[min(100rem,92vw)] px-8 sm:px-12 py-10 text-center">
      {% if branding and branding.logoSrc %}
        <img class="hero-logo mx-auto mb-6 w-28 md:w-40"
             src="{{ branding.logoSrc | url }}"
             alt="{{ branding.logoAlt or 'Logo' }}"
             sizes="{{ branding.logoSizes }}"
             loading="eager" fetchpriority="high"
             style="filter: drop-shadow(0 0 12px color-mix(in oklab, var(--neon-a) 30%, transparent));" />
      {% endif %}

      {% if eyebrow %}
        <p class="font-mono text-xs uppercase tracking-[0.18em] hb-ink-soft">{{ eyebrow }}</p>
      {% endif %}

      <h1 class="font-heading font-black uppercase tracking-[-0.025em] leading-[0.95] text-[clamp(2.75rem,6vw,6.5rem)] hb-ink">
        {{ title }}
      </h1>

      {% if lede %}<p class="mx-auto mt-4 max-w-3xl font-body text-base md:text-lg hb-ink-soft">{{ lede }}</p>{% endif %}
      {% if sublede %}<p class="mx-auto mt-2 max-w-3xl font-body text-base md:text-lg hb-ink-soft">{{ sublede }}</p>{% endif %}

      {% if ctas and ctas.length %}
        <div class="mt-6 flex flex-col items-center justify-center gap-4 sm:flex-row">
          {% for c in ctas %}
            {% set isPrimary = (c.kind or 'primary') == 'primary' %}
            <a href="{{ c.href[0] == '/' ? (c.href | url) : c.href }}"
               class="{% if isPrimary %}btn btn-primary{% else %}btn btn-outline{% endif %} px-7 py-3 font-heading font-bold">
              {{ c.label }}
            </a>
          {% endfor %}
        </div>
      {% endif %}
    </div>

    {% if tiles and tiles.length %}
      <div class="mt-10 grid gap-4 sm:grid-cols-3">
        {% for t in tiles %}
          {{ heroTile(t.k, t.h, t.s, t.url, t.featured or false) }}
        {% endfor %}
      </div>
    {% endif %}

    {% if build %}
      <div class="mt-8 text-center font-mono text-[11px] hb-ink-soft">
        {{ build.branch }} · {{ build.hash }} · {{ build.builtAtIso }}
      </div>
    {% endif %}
  </div>
</header>
