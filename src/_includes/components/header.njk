{# src/_includes/components/header.njk #}
{% from "components/nav.njk" import nav as navMenu %}
{% from "components/icons.njk" import icon %}

{% macro header(nav, page) %}
  {% set navLabel = 'Primary navigation' %}
  <header data-site-header class="relative w-full bg-base-100 border-b border-base-content/10">
    <div class="navbar max-w-screen-xl mx-auto px-6">
      <!-- Brand -->
      <div class="flex-1">
        <a
          href="{{ '/' | url }}"
          class="flex items-center gap-2 font-heading text-3xl text-primary no-underline"
        >
          {{ icon('flask-conical', { class: 'w-6 h-6', 'aria-hidden': 'true' }) }}
          <span>{{ 'Effusion Labs' | shout }}</span>
        </a>
      </div>

      <!-- Mobile nav -->
      <div class="flex-none lg:hidden">
        <nav class="dropdown dropdown-end" aria-label="{{ navLabel }}">
          <label tabindex="0" class="btn btn-ghost btn-square" aria-label="Open menu">
            {{ icon('menu', { class: 'w-6 h-6', 'aria-hidden': 'true' }) }}
          </label>
          {{
            navMenu(nav, page.url, 'menu-sm dropdown-content mt-3 z-[100] p-2 shadow bg-base-100 rounded-box w-56')
          }}
        </nav>
      </div>

      <!-- Desktop nav + theme toggle -->
      <div class="flex-none flex items-center gap-2">
        <nav class="hidden lg:block" aria-label="{{ navLabel }}">
          {{ navMenu(nav, page.url, 'menu-horizontal px-1', 'link-underline hover:text-primary') }}
        </nav>

        <button
          id="theme-toggle"
          class="btn btn-ghost btn-square"
          type="button"
          aria-pressed="false"
          aria-label="Switch theme"
          title="Toggle theme"
        >
          <span class="lucide-sun">{{
            icon('sun', { class: 'w-6 h-6', 'aria-hidden': 'true' })
          }}</span>
          <span class="lucide-moon hidden">{{
            icon('moon', { class: 'w-6 h-6', 'aria-hidden': 'true' })
          }}</span>
        </button>
      </div>
    </div>
  </header>
{% endmacro %}
