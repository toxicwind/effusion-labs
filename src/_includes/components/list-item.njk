{# components/list-item.njk #}
{% macro listItem(item) %}
  {% set t = (item.data.type or item.type or 'meta') | lower %}
  {% set badge =
      t == 'project'  ? 'badge-primary'
    : t == 'concept'  ? 'badge-secondary'
    : t == 'spark'    ? 'badge-accent'
    :                   'badge-ghost' %}

  <a
    href="{{ item.url | url }}"
    aria-label="Open {{ item.data.title }}"
    class="group relative block rounded-lg border-2 border-base-content/15 bg-base-100/60
           px-5 py-5 sm:px-6 transition-colors
           hover:border-primary/60 hover:bg-base-100
           focus:outline-none focus-visible:ring-4 focus-visible:ring-primary/40
           focus:border-primary/70"
    data-title="{{ item.data.title }}"
    {% if item.date %}data-date="{{ item.date | date('yyyy-MM-dd') }}"{% endif %}
    role="listitem"
  >
    <div class="flex items-start justify-between gap-3">
      <span class="badge {{ badge }} badge-outline badge-sm">
        {{ t | capitalize }}
      </span>

      {% if item.date %}
        <time
          datetime="{{ item.date | htmlDateString }}"
          class="text-[0.7rem] tabular-nums text-base-content/70"
        >
          {{ item.date | readableDate }}
        </time>
      {% endif %}
    </div>

    <h3 class="mt-3 font-heading text-lg leading-snug text-base-content
               group-hover:text-primary transition-colors
               clamp-2">
      {{ item.data.title }}
    </h3>

    {% if item.data.description %}
      <p class="mt-2 text-sm text-base-content/70 clamp-3">
        {{ item.data.description | truncate(140) }}
      </p>
    {% endif %}

    <div class="mt-4 flex items-center justify-between">
      <div class="flex items-center gap-2 text-xs text-base-content/70">
        {% if item.data.status %}
          <span class="badge badge-ghost badge-sm">{{ item.data.status | capitalize }}</span>
        {% endif %}
        {% if item.data.certainty %}
          <span class="badge badge-outline badge-sm">{{ item.data.certainty }}</span>
        {% endif %}
      </div>

      <span class="inline-flex items-center gap-1 text-sm font-medium link link-primary">
        Open <span aria-hidden class="transition-transform group-hover:translate-x-0.5">â†’</span>
      </span>
    </div>

    <span aria-hidden
          class="pointer-events-none absolute inset-y-2 left-2 w-1 rounded-full
                 bg-gradient-to-b from-primary/70 to-primary/30 opacity-70
                 group-hover:opacity-100 group-focus:opacity-100"></span>
  </a>
{% endmacro %}
