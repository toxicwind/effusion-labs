{# components/list-item.njk â€” fixed, clean Nunjucks #}
{% macro listItem(item) %}
  {% set t = (item.data.type or item.type or 'meta') | lower %}
  {%
    set typeClass = (
      t == 'project' and 'pill--project' or
      t == 'concept' and 'pill--concept' or
      t == 'spark'   and 'pill--spark'   or
                       'pill--meta'
    )
  %}

  <a
    href="{{ item.url | url }}"
    aria-label="{{ item.data.title }}"
    class="group block hb-brut-card hb-intensity-lite p-5 sm:p-6 text-left no-underline transition-transform hover:-translate-y-0.5 focus-visible:-translate-y-0.5"
    data-title="{{ item.data.title }}"
    {% if item.date %}
      data-date="{{ item.date | date('yyyy-MM-dd') }}"
    {% endif %}
    role="listitem"
  >
    <div class="flex items-start justify-between gap-3">
      {% if item.data.type %}
        <span class="pill {{ typeClass }}">{{ item.data.type | capitalize }}</span>
      {% endif %}
      {% if item.date %}
        <time datetime="{{ item.date | htmlDateString }}" class="text-[0.7rem] opacity-80">
          {{ item.date | readableDate }}
        </time>
      {% endif %}
    </div>

    <h3 class="mt-2 font-heading text-lg leading-tight text-base-content group-hover:text-primary transition-colors">
      {{ item.data.title }}
    </h3>

    {% if item.data.description %}
      <p class="mt-1 text-sm text-base-content/90 clamp-3">{{ item.data.description }}</p>
    {% endif %}

    <div class="mt-2 flex items-center justify-between text-xs text-base-content/70">
      {% if item.data.status %}<span class="capitalize">[{{ item.data.status }}]</span>{% endif %}
    </div>
  </a>
{% endmacro %}
