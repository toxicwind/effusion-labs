---
layout: base.njk
fullBleed: true
metaDisable: true
---
# dprint-ignore-file
{% set report = lvreport or {} %}
{% set sections = report.sections or {} %}
{% set kpis = report.kpis or [] %}
{% set runsHistory = sections.runsHistory or [] %}
{% set sitemaps = sections.sitemaps or [] %}
{% set duplicates = sections.duplicates or [] %}
{% set topProducts = sections.topProducts or [] %}
{% set robots = sections.robots or [] %}
{% set docs = sections.docs or [] %}
{% set sample = sections.sample or [] %}
{% set datasetMap = sections.datasetMap or {} %}

<section class="relative overflow-hidden rounded-box bg-gradient-to-br from-primary via-secondary to-accent p-10 text-primary-content shadow-xl">
  <div class="absolute inset-0 pointer-events-none opacity-30 mix-blend-screen bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.5),_transparent_65%)]"></div>
  <div class="relative grid gap-10 lg:grid-cols-[minmax(0,1fr)_minmax(0,360px)] items-start">
    <div>
      <h1 class="text-4xl font-bold tracking-tight">{{ title }}</h1>
      <p class="mt-3 max-w-2xl text-sm md:text-base opacity-85">
        Unified LV image intelligence — hydrated from the build-time bundle and rendered as a single hyper-responsive dashboard.
      </p>
      <div class="mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-4" id="lvreport-kpis">
        {% for stat in kpis %}
          <div class="glass rounded-box border border-white/10 bg-white/10 p-4 text-left shadow-lg">
            <p class="text-xs uppercase tracking-widest opacity-80">{{ stat.label }}</p>
            <p class="mt-3 text-3xl font-black tabular-nums">{{ stat.value | number }}</p>
          </div>
        {% endfor %}
      </div>
      <div class="mt-6 flex flex-wrap gap-3">
        <button class="btn btn-sm md:btn-md btn-outline border-white/30 text-primary-content/80" data-lvreport="open-search">
          <span class="font-semibold">Global dataset search</span>
          <span class="hidden sm:inline opacity-70">⌘K / Ctrl K</span>
        </button>
        <button class="btn btn-sm md:btn-md btn-outline border-white/20 text-primary-content/70" data-lvreport="toggle-facets">
          Facet filters
        </button>
      </div>
    </div>
    <aside class="grid gap-4 text-sm" id="lvreport-meta">
      <div class="rounded-box bg-black/20 p-4 shadow-md">
        <p class="font-semibold uppercase tracking-wide text-xs opacity-80">Bundle integrity</p>
        <p class="mt-2 text-sm opacity-75">Hydrated once at build time. Runtime reads the baked index — no live LFS access.</p>
        <div class="mt-4 flex items-center gap-2 text-xs opacity-70" data-lvreport="bundle-meta"></div>
      </div>
      <div class="rounded-box bg-black/10 p-4 shadow-md">
        <p class="font-semibold uppercase tracking-wide text-xs opacity-80">Latest run</p>
        {% if runsHistory | length %}
          <p class="mt-2 text-sm opacity-75">
            {{ runsHistory[0].label or 'Run' }} • {{ runsHistory[0].finishedAt or runsHistory[0].startedAt }}
          </p>
        {% else %}
          <p class="mt-2 text-sm opacity-75">Awaiting first ingest.</p>
        {% endif %}
      </div>
    </aside>
  </div>
</section>

<section class="mt-12 grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
  <div class="rounded-box bg-base-200/70 p-6 shadow-inner">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">Dataset map</h2>
      <span class="badge badge-outline" data-lvreport="map-count"></span>
    </div>
    <div class="mt-4 grid gap-4 lg:grid-cols-2" id="lvreport-map">
      <div>
        <h3 class="text-sm font-semibold uppercase tracking-wide opacity-70">Hosts</h3>
        <ul class="mt-2 max-h-40 space-y-1 overflow-auto text-sm">
          {% for host in (datasetMap.hosts or []) | slice(0, 20) %}
            <li class="truncate text-primary">{{ host.host or host }}</li>
          {% endfor %}
        </ul>
      </div>
      <div>
        <h3 class="text-sm font-semibold uppercase tracking-wide opacity-70">Locales</h3>
        <ul class="mt-2 max-h-40 space-y-1 overflow-auto text-sm">
          {% for locale in (datasetMap.locales or []) | slice(0, 20) %}
            <li class="truncate text-primary">{{ locale.locale or locale.code or locale }}</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
  <div class="rounded-box bg-base-200/50 p-6 shadow-inner">
    <h2 class="text-xl font-semibold">Runs history</h2>
    <div class="mt-4 space-y-2 text-sm" id="lvreport-runs">
      {% for entry in runsHistory | slice(0, 6) %}
        <div class="rounded-lg border border-base-300/50 bg-base-100/70 p-3">
          <p class="font-semibold">{{ entry.label or entry.mode or 'Run' }}</p>
          <p class="mt-1 text-xs opacity-70">{{ entry.finishedAt or entry.startedAt }}</p>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<section class="mt-12" id="lvreport-table">
  <div class="flex flex-wrap items-center justify-between gap-3">
    <div>
      <h2 class="text-2xl font-semibold">Global inventory</h2>
      <p class="text-sm opacity-70">Searchable, paginated, facet-aware listing of every captured LV record.</p>
    </div>
    <div class="flex flex-wrap gap-2">
      <input type="search" class="input input-bordered input-sm w-48 md:w-64" placeholder="Search SKU, title, locale" data-lvreport="table-search" />
      <select class="select select-bordered select-sm" data-lvreport="page-size">
        <option value="25" selected>25 / page</option>
        <option value="50">50 / page</option>
        <option value="100">100 / page</option>
        <option value="200">200 / page</option>
      </select>
      <button class="btn btn-sm" data-lvreport="open-drawer">Filters</button>
    </div>
  </div>
  <div class="mt-4 overflow-hidden rounded-xl border border-base-300/60 bg-base-100 shadow-xl">
    <table class="table table-zebra w-full text-sm">
      <thead class="bg-base-200/80 text-xs uppercase tracking-wide">
        <tr>
          <th class="w-24">SKU</th>
          <th>Title</th>
          <th class="w-24">Locale</th>
          <th class="w-28">Type</th>
          <th class="w-20 text-right">Images</th>
          <th class="w-36">Updated</th>
          <th class="w-12"></th>
        </tr>
      </thead>
      <tbody data-lvreport="table-body">
        <tr>
          <td colspan="7" class="p-8 text-center text-sm opacity-60">Loading inventory…</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="mt-4 flex flex-wrap items-center justify-between gap-3 text-sm" data-lvreport="table-footer">
    <div data-lvreport="table-summary">Awaiting data…</div>
    <div class="join">
      <button class="btn btn-sm join-item" data-lvreport="page-prev">Prev</button>
      <span class="join-item px-4 py-2 text-xs" data-lvreport="page-status">1 / 1</span>
      <button class="btn btn-sm join-item" data-lvreport="page-next">Next</button>
    </div>
  </div>
</section>

<section class="mt-12 grid gap-6 lg:grid-cols-2" id="lvreport-duplicates">
  <div class="rounded-box bg-base-200/50 p-6 shadow-inner">
    <h2 class="text-xl font-semibold">Duplicate clusters</h2>
    <ul class="mt-4 space-y-3 text-sm" data-lvreport="duplicate-list">
      {% for cluster in duplicates | slice(0, 5) %}
        <li class="rounded-lg border border-base-300/50 bg-base-100/70 p-3">
          <p class="font-semibold">{{ cluster.canonical?.title or cluster.canonicalId }}</p>
          <p class="mt-1 text-xs opacity-70">{{ cluster.duplicates | length }} duplicates</p>
        </li>
      {% endfor %}
    </ul>
  </div>
  <div class="rounded-box bg-base-200/50 p-6 shadow-inner" id="lvreport-top-products">
    <h2 class="text-xl font-semibold">Top products</h2>
    <ul class="mt-4 space-y-3 text-sm" data-lvreport="product-list">
      {% for product in topProducts | slice(0, 5) %}
        <li class="rounded-lg border border-base-300/50 bg-base-100/70 p-3">
          <p class="font-semibold">{{ product.title or product.pageUrl }}</p>
          <p class="mt-1 text-xs opacity-70">{{ product.images | length }} images</p>
        </li>
      {% endfor %}
    </ul>
  </div>
</section>

<section class="mt-12 grid gap-6 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)_minmax(0,1fr)]">
  <div class="rounded-box bg-base-200/50 p-6 shadow-inner" id="lvreport-hosts">
    <h2 class="text-xl font-semibold">Hosts overview</h2>
    <div class="mt-4 space-y-3 text-sm" data-lvreport="hosts-list"></div>
  </div>
  <div class="rounded-box bg-base-200/50 p-6 shadow-inner" id="lvreport-robots">
    <h2 class="text-xl font-semibold">Robots explorer</h2>
    <div class="mt-4 space-y-3 text-sm" data-lvreport="robots-list"></div>
  </div>
  <div class="rounded-box bg-base-200/50 p-6 shadow-inner" id="lvreport-docs">
    <h2 class="text-xl font-semibold">Cached documents</h2>
    <div class="mt-4 space-y-3 text-sm" data-lvreport="docs-list"></div>
  </div>
</section>

<section class="mt-12" id="lvreport-samples">
  <div class="rounded-box bg-base-200/60 p-6 shadow-inner">
    <div class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
      <div class="max-w-2xl space-y-2">
        <h2 class="text-2xl font-semibold">Fresh arrivals</h2>
        <p class="text-sm opacity-70">Latest LV captures hydrate from the baked index with a throttled image queue — no bursty fetches.</p>
        <p class="text-xs font-semibold uppercase tracking-wide text-primary">Scroll to reveal thumbnails; loading stays under rate limits.</p>
      </div>
      <div class="flex flex-wrap gap-2 text-xs opacity-70">
        <span class="badge badge-outline badge-sm">Lazy</span>
        <span class="badge badge-outline badge-sm">Queued</span>
        <span class="badge badge-outline badge-sm">Hypebrüt gallery</span>
      </div>
    </div>
    <div class="mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4" data-lvreport="sample-grid">
      <div class="flex aspect-[4/5] animate-pulse flex-col justify-end rounded-3xl bg-gradient-to-br from-base-300 via-base-200 to-base-100 p-4 text-xs text-base-content/60">
        <span>Hydrating arrivals…</span>
        <span class="opacity-50">Queue primed</span>
      </div>
    </div>
  </div>
</section>

<section class="mt-12" id="lvreport-search">
  <div class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
    <div>
      <h2 class="text-2xl font-semibold">Global search</h2>
      <p class="text-sm opacity-70">Command palette powering fuzzy lookup across the index.</p>
    </div>
    <div class="join">
      <input type="search" class="input input-bordered join-item w-64" placeholder="Try “Neverfull MM”" data-lvreport="global-search" />
      <button class="btn btn-primary join-item" data-lvreport="search-open">Open</button>
    </div>
  </div>
</section>

<div id="lvreport-filters" class="drawer drawer-end">
  <input id="lvreport-filters-toggle" type="checkbox" class="drawer-toggle" />
  <div class="drawer-side z-[80]">
    <label for="lvreport-filters-toggle" aria-label="Close filters" class="drawer-overlay"></label>
    <div class="min-h-full w-80 max-w-md bg-base-100 p-6">
      <h2 class="text-lg font-semibold">Facet filters</h2>
      <div class="mt-4 space-y-6" data-lvreport="facet-panel">
        <div>
          <h3 class="text-xs font-semibold uppercase tracking-wide opacity-70">Locale</h3>
          <div class="mt-2 flex flex-wrap gap-2" data-lvreport="facet-locale"></div>
        </div>
        <div>
          <h3 class="text-xs font-semibold uppercase tracking-wide opacity-70">Product type</h3>
          <div class="mt-2 flex flex-wrap gap-2" data-lvreport="facet-type"></div>
        </div>
        <div>
          <h3 class="text-xs font-semibold uppercase tracking-wide opacity-70">Updated month</h3>
          <div class="mt-2 flex flex-col gap-1" data-lvreport="facet-month"></div>
        </div>
        <div class="form-control">
          <label class="cursor-pointer label">
            <span class="label-text">Only hero imagery</span>
            <input type="checkbox" class="toggle" data-lvreport="facet-hero" />
          </label>
        </div>
      </div>
      <div class="mt-6 flex gap-2">
        <button class="btn btn-sm btn-primary flex-1" data-lvreport="facet-apply">Apply</button>
        <button class="btn btn-sm btn-ghost" data-lvreport="facet-reset">Reset</button>
      </div>
    </div>
  </div>
</div>

<div id="lvreport-drawer" class="drawer drawer-end">
  <input id="lvreport-drawer-toggle" type="checkbox" class="drawer-toggle" />
  <div class="drawer-side z-[90]">
    <label for="lvreport-drawer-toggle" aria-label="Close details" class="drawer-overlay"></label>
    <div class="min-h-full w-[28rem] max-w-full bg-base-100 p-6" data-lvreport="detail-panel">
      <h2 class="text-lg font-semibold">Item details</h2>
      <div class="mt-4 space-y-4" data-lvreport="detail-content">
        <p class="text-sm opacity-70">Select a row to inspect metadata.</p>
      </div>
    </div>
  </div>
</div>

<script type="application/json" id="lvreport-data">{{ clientPayloadJson | safe }}</script>
<script type="module" src="/assets/js/lvreport-app.js"></script>
