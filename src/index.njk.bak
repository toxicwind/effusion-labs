---
layout: "layouts/base.njk"
metaDisable: true
showTitle: false
prose: false
---

{#
  Home (daisyUI-first)
  - Clean hero with CTA
  - Quick stats
  - Feature cards
  - Featured projects
  - Latest across the lab
  - Concept map CTA
#}

{% from "components/icons.njk" import icon %}

{# Safeguards for counts #}
{% set allWork = collections.work or [] %}
{% set projectsAll = collections.projects or [] %}
{% set conceptsAll = collections.concepts or [] %}
{% set sparksAll = collections.sparks or [] %}

<div id="page-shell">
  <!-- HERO -->
  <section class="hero min-h-[55vh] bg-base-200/50">
    <div class="hero-content text-center">
      <div class="max-w-3xl">
        {% if branding and branding.logoSrc %}
        <img src="{{ branding.logoSrc | url }}" alt="{{ branding.logoAlt or 'Logo' }}" class="mx-auto mb-4 w-24 sm:w-28 md:w-32"/>
        {% endif %}
        <h1 class="text-4xl md:text-6xl font-heading font-black tracking-[-0.02em] leading-tight">
          {{ title or 'Ideas, prototypes, and tools—shipped straight from the lab.' }}
        </h1>
        {% if lede %}
          <p class="mt-4 text-base md:text-lg opacity-90">{{ lede }}</p>
        {% endif %}
        <div class="mt-6 flex items-center justify-center gap-3">
          {% for c in (ctas or []) %}
            {% set _href = (c.href or '/work/') | url %}
            {% set _label = c.label or 'Explore work' %}
            {% set _variant = (c.variant or 'primary') %}
            {% set _btn = _variant == 'ghost' ? 'btn btn-ghost' : _variant == 'outline' ? 'btn btn-outline' : 'btn btn-primary' %}
            <a class="{{ _btn }} px-6" href="{{ _href }}">{{ _label }}</a>
          {% endfor %}
          <a class="btn btn-outline" href="{{ '/map/' | url }}">Open Concept Map</a>
        </div>
      </div>
    </div>
  </section>

  <!-- STATS STRIP -->
  <section aria-labelledby="stats-heading" class="container-fluid px-4 sm:px-6 lg:px-8 -mt-10">
    <div class="stats shadow bg-base-100 w-full">
      <div class="stat">
        <div class="stat-title">Total entries</div>
        <div class="stat-value text-primary">{{ allWork | length }}</div>
        <div class="stat-desc">Projects · Concepts · Sparks · Meta</div>
      </div>
      <div class="stat">
        <div class="stat-title">Projects</div>
        <div class="stat-value">{{ projectsAll | length }}</div>
        <div class="stat-desc">Builds and prototypes</div>
      </div>
      <div class="stat">
        <div class="stat-title">Concepts</div>
        <div class="stat-value">{{ conceptsAll | length }}</div>
        <div class="stat-desc">Frameworks and structures</div>
      </div>
      <div class="stat">
        <div class="stat-title">Sparks</div>
        <div class="stat-value">{{ sparksAll | length }}</div>
        <div class="stat-desc">Notes and quick ideas</div>
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section class="container-fluid px-4 sm:px-6 lg:px-8 mt-12">
    <div class="grid gap-4 md:grid-cols-3">
      <div class="card bg-base-100 border border-base-300/60">
        <div class="card-body">
          <div class="flex items-center gap-2">
            {{ icon('sparkles', { class: 'size-6 text-primary', 'aria-hidden':'true' }) }}
            <h3 class="card-title">Design Systems</h3>
          </div>
          <p>Strong foundations for UI: tokens, components, and motion that scale.</p>
        </div>
      </div>
      <div class="card bg-base-100 border border-base-300/60">
        <div class="card-body">
          <div class="flex items-center gap-2">
            {{ icon('cpu', { class: 'size-6 text-primary', 'aria-hidden':'true' }) }}
            <h3 class="card-title">Eleventy + Vite</h3>
          </div>
          <p>Fast builds, clean authoring, and modern tooling with Tailwind v4 + daisyUI.</p>
        </div>
      </div>
      <div class="card bg-base-100 border border-base-300/60">
        <div class="card-body">
          <div class="flex items-center gap-2">
            {{ icon('bot', { class: 'size-6 text-primary', 'aria-hidden':'true' }) }}
            <h3 class="card-title">Data & AI</h3>
          </div>
          <p>Meaningful integrations and evaluable interactions, not just demos.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FEATURED PROJECTS -->
  {% if projects and (projects | length) %}
  <section class="container-fluid px-4 sm:px-6 lg:px-8 mt-14 space-y-4">
    <div class="flex items-center justify-between">
      <h2 class="text-2xl font-heading">Featured projects</h2>
      <a href="{{ '/work/' | url }}" class="link link-primary">Browse all</a>
    </div>
    <div class="grid gap-4 md:grid-cols-3">
      {% for p in projects %}
      <article class="card bg-base-100 border border-base-300/60">
        <div class="card-body">
          <div class="flex items-start justify-between">
            <span class="badge badge-outline">Project</span>
            {% if p.date %}
              <time class="text-xs opacity-70" datetime="{{ p.date | htmlDateString }}">{{ p.date | readableDate }}</time>
            {% endif %}
          </div>
          <h3 class="card-title text-lg leading-tight">
            <a class="no-underline hover:underline" href="{{ p.url | url }}">{{ p.data.title }}</a>
          </h3>
          {% if p.data.description %}
          <p class="opacity-90">{{ p.data.description | truncate(140) }}</p>
          {% endif %}
          <div class="card-actions justify-start mt-2">
            <a class="btn btn-sm btn-primary" href="{{ p.url | url }}">Open</a>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  <!-- LATEST ACROSS THE LAB -->
  {% set latest = work or allWork | slice(0,9) %}
  {% if latest and (latest | length) %}
  <section class="container-fluid px-4 sm:px-6 lg:px-8 mt-14 space-y-4">
    <h2 class="text-2xl font-heading">Latest across the lab</h2>
    <ul class="grid gap-4 md:gap-6 grid-cols-[repeat(auto-fit,minmax(18rem,1fr))] list-none p-0 m-0">
      {% for item in latest %}
      <li>
        <article class="card bg-base-100 border border-base-300/60 h-full">
          <div class="card-body">
            <div class="flex items-start justify-between">
              <span class="badge badge-ghost">{{ (item.type or item.data.type) | capitalize }}</span>
              {% if item.date %}
                <time class="text-xs opacity-70" datetime="{{ item.date | htmlDateString }}">{{ item.date | readableDate }}</time>
              {% endif %}
            </div>
            <h3 class="card-title text-base leading-snug">
              <a class="no-underline hover:underline" href="{{ item.url | url }}">{{ item.data.title }}</a>
            </h3>
            {% if item.data.description %}
              <p class="text-sm opacity-90">{{ item.data.description | truncate(140) }}</p>
            {% endif %}
            <div class="card-actions justify-start mt-2">
              <a class="btn btn-xs btn-outline" href="{{ item.url | url }}">Read</a>
            </div>
          </div>
        </article>
      </li>
      {% endfor %}
    </ul>
  </section>
  {% endif %}

  <!-- CONCEPT MAP CTA -->
  <section class="container-fluid px-4 sm:px-6 lg:px-8 mt-16">
    <div class="hero rounded-box bg-base-200/60">
      <div class="hero-content text-center">
        <div class="max-w-2xl">
          <h2 class="text-2xl md:text-3xl font-heading">Explore the Interactive Concept Map</h2>
          <p class="mt-2 opacity-90">Navigate the living knowledge graph that links sparks, concepts, and projects.</p>
          <a href="{{ '/map/' | url }}" class="btn btn-primary mt-4">Launch the map</a>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ (optional quick clarity) -->
  <section class="container-fluid px-4 sm:px-6 lg:px-8 mt-12 mb-16">
    <div class="grid gap-3 md:grid-cols-3">
      <div class="collapse collapse-arrow bg-base-200/40 border border-base-300/60">
        <input type="checkbox" />
        <div class="collapse-title text-md font-medium">What is Effusion Labs?</div>
        <div class="collapse-content"><p>An exploration space for systems thinking, design, and code—shipping artifacts you can use.</p></div>
      </div>
      <div class="collapse collapse-arrow bg-base-2 00/40 border border-base-300/60">
        <input type="checkbox" />
        <div class="collapse-title text-md font-medium">How often is this updated?</div>
        <div class="collapse-content"><p>Work is added continuously; the lists above always reflect the latest entries.</p></div>
      </div>
      <div class="collapse collapse-arrow bg-base-200/40 border border-base-300/60">
        <input type="checkbox" />
        <div class="collapse-title text-md font-medium">Can I contribute?</div>
        <div class="collapse-content"><p>Yes—join the group discussions on GitHub or open issues with ideas and fixes.</p></div>
      </div>
    </div>
  </section>
</div>
