{"version":3,"file":"mschf-overlay.DENOLFo-.js","sources":["../../src/assets/js/mschf-overlay.js"],"sourcesContent":["/**\n * @license Effusion Labs — Hypebrüt Overlay (Balanced Edition)\n *\n * A refactored version balancing aesthetics and performance. It restores some of\n * the original's visual flair while keeping the core optimizations that prevent lag.\n *\n * Key Features:\n * - A single, curated scene that composes on load. No expensive recomposition.\n * - Re-introduction of key visual elements like corner markers.\n * - Enhanced styling for a richer, more atmospheric look.\n * - A lightweight rendering loop that avoids animation lag.\n * - Layout analysis runs only once at boot to prevent performance issues.\n *\n * @version 3.1 (Balanced)\n * @author Effusion Labs (Refactored for Performance & Aesthetics)\n */\n;(() => {\n  // =================================================================\n  // I. BOOT GUARD & INITIALIZATION\n  // =================================================================\n\n  if (window.__mschfBooted) return\n  window.__mschfBooted = true\n\n  const scope = document.body || document.documentElement\n  if (!scope || scope.dataset.mschf === 'off' || localStorage.getItem('mschf:off') === '1') {\n    return\n  }\n\n  // =================================================================\n  // II. CORE UTILITIES & HELPERS\n  // =================================================================\n\n  const clamp = (v, a, b) => Math.min(b, Math.max(a, v))\n  const pick = arr => arr[Math.floor(Math.random() * arr.length)]\n  const css = (el, obj) => {\n    for (const k in obj) el.style[k] = obj[k]\n    return el\n  }\n  const el = (tag, cls, parent) => {\n    const n = document.createElement(tag)\n    if (cls) n.className = cls\n    ;(parent || document.body).appendChild(n)\n    n.style.pointerEvents = 'none'\n    n.style.userSelect = 'none'\n    // Add debug attributes\n    if (State._mountCtx) {\n      n.dataset.mschf = '1'\n      n.dataset.mschfKind = State._mountCtx.kind || 'unknown'\n      n.dataset.mschfFamily = State._mountCtx.family || 'unknown'\n    }\n    return n\n  }\n\n  // =================================================================\n  // III. ENVIRONMENT & PERFORMANCE DETECTION\n  // =================================================================\n\n  const viewportMetrics = () => {\n    const width = Math.max(1, window.innerWidth || 1024)\n    const height = Math.max(1, window.innerHeight || 768)\n    const area = width * height\n    const pixelRatio = window.devicePixelRatio || 1\n    const hiDensity = pixelRatio >= 1.5\n    const xl = width >= 1440 || area >= 3_200_000\n    const uhd = width >= 2200 || area >= 5_000_000\n    return { width, height, degrade: uhd || (hiDensity && xl) }\n  }\n\n  const PERF_BASELINE = viewportMetrics()\n\n  // =================================================================\n  // IV. PALETTE MANAGEMENT\n  // =================================================================\n\n  const HYPERBRUT_PALETTES = [\n    {\n      name: 'acid-lab',\n      tokens: {\n        ink: '#f6f8ff',\n        'ink-soft': 'rgba(246, 248, 255, 0.68)',\n        grid: 'rgba(246, 248, 255, 0.12)',\n        'grid-alt': 'rgba(12, 247, 254, 0.14)',\n        pop: '#ff2e63',\n        'pop-alt': '#12fce6',\n        'pop-bold': '#f9ff33',\n        wire: 'rgba(255, 255, 255, 0.38)',\n        glow: 'rgba(255, 46, 99, 0.6)',\n        halo: 'rgba(12, 247, 254, 0.45)',\n        paper: 'rgba(10, 9, 23, 0.82)',\n        noise: '0.06',\n        shadow: 'rgba(0, 0, 0, 0.42)',\n        scan: 'rgba(12, 247, 254, 0.45)',\n        'scan-tail': 'rgba(255, 46, 99, 0.2)',\n        plate: 'rgba(12, 14, 25, 0.88)',\n        tape: '#111318',\n      },\n    },\n    {\n      name: 'proto-cyan',\n      tokens: {\n        ink: '#f5fffb',\n        'ink-soft': 'rgba(245, 255, 251, 0.7)',\n        grid: 'rgba(245, 255, 251, 0.11)',\n        'grid-alt': 'rgba(0, 255, 188, 0.18)',\n        pop: '#00ffbc',\n        'pop-alt': '#ff6ad5',\n        'pop-bold': '#f9ff6a',\n        wire: 'rgba(150, 255, 230, 0.4)',\n        glow: 'rgba(0, 255, 188, 0.52)',\n        halo: 'rgba(255, 106, 213, 0.38)',\n        paper: 'rgba(5, 14, 12, 0.85)',\n        noise: '0.045',\n        shadow: 'rgba(0, 0, 0, 0.4)',\n        scan: 'rgba(0, 255, 188, 0.45)',\n        'scan-tail': 'rgba(255, 106, 213, 0.25)',\n        plate: 'rgba(8, 24, 24, 0.88)',\n        tape: '#041814',\n      },\n    },\n  ]\n\n  const pickPalette = () => {\n    const base = { ...pick(HYPERBRUT_PALETTES) }\n    const tokens = { ...(base.tokens || {}) }\n    if (Math.random() < 0.35) [tokens.pop, tokens['pop-alt']] = [tokens['pop-alt'], tokens.pop]\n    return { name: base.name, tokens, seed: Math.random().toString(16).slice(2, 6) }\n  }\n\n  const applyPaletteTokens = root => {\n    if (!root || !State.palette) return\n    root.dataset.mschfPalette = State.palette.name || ''\n    for (const [key, value] of Object.entries(State.palette.tokens || {})) {\n      root.style.setProperty(`--mschf-${key}`, value)\n    }\n  }\n\n  // =================================================================\n  // V. GLOBAL STATE (SIMPLIFIED)\n  // =================================================================\n\n  const State = {\n    root: null,\n    domLayer: null,\n    palette: pickPalette(),\n    nodeBudget: PERF_BASELINE.degrade ? 50 : 80, // Increased budget slightly\n    nodeCount: 0,\n    actors: new Set(),\n    updaters: new Set(),\n    _updaterList: [],\n    families: { scaffold: new Set(), ephemera: new Set(), frame: new Set() },\n    safeZones: [],\n    actorBoxes: new Map(),\n    gridCols: 10,\n    gridRows: 6,\n    paused: false,\n    _mountCtx: null, // For debug tagging during actor creation\n    readingPressure: 0,\n  }\n\n  // =================================================================\n  // VI. ROOT & LAYER MOUNTING\n  // =================================================================\n\n  function mountRoot() {\n    let root = document.getElementById('mschf-overlay-root')\n    if (!root) {\n      root = el('div', '', document.body)\n      root.id = 'mschf-overlay-root'\n    }\n    css(root, {\n      pointerEvents: 'none',\n      userSelect: 'none',\n      position: 'fixed',\n      inset: '0',\n      zIndex: '44',\n      contain: 'layout style paint',\n      opacity: '0.9',\n    })\n    root.setAttribute('aria-hidden', 'true')\n    root.innerHTML = ''\n\n    State.root = root\n    State.domLayer = el('div', 'mschf-layer', root)\n    css(State.domLayer, {\n      position: 'absolute',\n      inset: 0,\n      pointerEvents: 'none',\n      userSelect: 'none',\n    })\n\n    applyPaletteTokens(State.root)\n  }\n\n  // =================================================================\n  // VII. PAGE CONTEXT & LAYOUT ANALYSIS (RUNS ONCE)\n  // =================================================================\n\n  function analyzePageLayout() {\n    const selector = '.prose, main, article, header, nav, [data-safe]'\n    const pad = 24\n    const rects = []\n    document.querySelectorAll(selector).forEach(node => {\n      const r = node.getBoundingClientRect()\n      if (r && r.width > 0 && r.height > 0) {\n        rects.push({\n          x: clamp(r.left - pad, 0, innerWidth),\n          y: clamp(r.top - pad, 0, innerHeight),\n          w: clamp(r.width + pad * 2, 0, innerWidth),\n          h: clamp(r.height + pad * 2, 0, innerHeight),\n        })\n      }\n    })\n    State.safeZones = rects\n\n    const pCount = document.querySelectorAll('p, li, blockquote').length\n    State.readingPressure = clamp(pCount / 100, 0, 1)\n  }\n\n  // =================================================================\n  // VIII. PLACEMENT & COLLISION\n  // =================================================================\n\n  const rectOverlap = (a, b) =>\n    Math.max(0, Math.min(a.x + a.w, b.x + b.w) - Math.max(a.x, b.x))\n    * Math.max(0, Math.min(a.y + a.h, b.y + b.h) - Math.max(a.y, b.y))\n\n  const collides = r => {\n    const area = Math.max(1, r.w * r.h)\n    for (const z of State.safeZones) if (rectOverlap(r, z) / area > 0.05) return true\n    for (const [, z] of State.actorBoxes) if (rectOverlap(r, z) / area > 0.1) return true\n    return false\n  }\n\n  function findSpot(w, h) {\n    for (let i = 0; i < 25; i++) {\n      const x = Math.random() * (innerWidth - w)\n      const y = Math.random() * (innerHeight - h)\n      const rect = { x, y, w, h }\n      if (!collides(rect)) {\n        return rect\n      }\n    }\n    return { x: Math.random() * (innerWidth - w), y: Math.random() * (innerHeight - h), w, h }\n  }\n\n  // =================================================================\n  // IX. ACTOR FRAMEWORK\n  // =================================================================\n\n  function mount(actor, family) {\n    if (!actor || (State.nodeCount + (actor.cost || 1) > State.nodeBudget)) {\n      return false\n    }\n\n    State._mountCtx = { kind: actor.kind, family }\n    State.families[family].add(actor)\n    State.actors.add(actor)\n    State.nodeCount += actor.cost || 1\n\n    try {\n      actor.mount(State.domLayer)\n    } catch {\n      State.families[family].delete(actor)\n      State.actors.delete(actor)\n      State.nodeCount = Math.max(0, State.nodeCount - (actor.cost || 1))\n      return false\n    }\n\n    if (typeof actor.update === 'function') {\n      State.updaters.add(actor)\n    }\n\n    const r = actor.node?.getBoundingClientRect?.()\n    if (r?.width > 0) {\n      State.actorBoxes.set(actor, { x: r.left, y: r.top, w: r.width, h: r.height })\n    }\n\n    State._mountCtx = null\n    return true\n  }\n\n  const A = {} // Actor Factory\n\n  // --- SCAFFOLD ACTORS ---\n  A.grid = () => ({\n    kind: 'grid',\n    cost: 1,\n    mount(p) {\n      this.node = el('div', 'mschf-grid', p)\n      this.node.dataset.variant = pick(['dots', 'lines'])\n    },\n  })\n  A.rulers = () => ({\n    kind: 'rulers',\n    cost: 1,\n    mount(p) {\n      const top = el('div', 'mschf-ruler mschf-ruler-top', p)\n      const left = el('div', 'mschf-ruler mschf-ruler-left', p)\n      this.node = {\n        remove: () => {\n          top.remove()\n          left.remove()\n        },\n      }\n    },\n  })\n  A.corners = () => ({\n    kind: 'corners',\n    cost: 1,\n    mount(p) {\n      const nodes = ['tl', 'tr', 'bl', 'br'].map(pos =>\n        el('div', `mschf-corner mschf-corner-${pos}`, p)\n      )\n      this.node = { remove: () => nodes.forEach(n => n.remove()) }\n    },\n  })\n\n  // --- EPHEMERA ACTORS ---\n  A.plate = () => ({\n    kind: 'plate',\n    cost: 1,\n    mount(p) {\n      this.node = el('div', 'mschf-plate', p)\n      el('div', 'mschf-barcode', this.node)\n      const code = el('div', 'mschf-code', this.node)\n      code.textContent = `SEED:${Math.random().toString(16).slice(-6).toUpperCase()}`\n      const spot = findSpot(180, 40)\n      css(this.node, { left: `${spot.x}px`, top: `${spot.y}px` })\n    },\n  })\n  A.specimen = () => ({\n    kind: 'specimen',\n    cost: 1,\n    mount(p) {\n      this.node = el('div', 'mschf-specimen', p)\n      const id = Math.random().toString(36).slice(2, 7).toUpperCase()\n      this.node.innerHTML = `<strong>SPECIMEN</strong><span>ID ${id}</span><span>${\n        new Date().toISOString().slice(0, 10)\n      }</span>`\n      const side = Math.random() < 0.5 ? 'right' : 'left'\n      const s = { top: `${16 + Math.random() * 20}px` }\n      s[side] = `${18 + Math.random() * 24}px`\n      css(this.node, s)\n    },\n  })\n\n  // --- FRAME ACTORS ---\n  A.brackets = () => ({\n    kind: 'brackets',\n    cost: 1,\n    mount(p) {\n      this.node = el('div', 'mschf-brackets', p)\n      this.node.dataset.variant = State.readingPressure > 0.3 ? 'lite' : 'bold'\n      const pad = 3 + Math.random() * 3\n      this.node.style.setProperty('--pad', `${pad}vmin`)\n      this.node.style.setProperty('--b', (this.node.dataset.variant === 'lite' ? 2 : 3) + 'px')\n    },\n  })\n  A.dims = () => ({\n    kind: 'dims',\n    cost: 1,\n    mount(p) {\n      this.node = el('div', 'mschf-dims', p)\n      const y = Math.random() < 0.5 ? 8 + Math.random() * 12 : 78 + Math.random() * 12\n      const x1 = 6 + Math.floor(Math.random() * 24)\n      const span = 24 + Math.floor(Math.random() * 32)\n      const x2 = Math.min(92, x1 + span)\n      this.node.style.setProperty('--x1', `${x1}vw`)\n      this.node.style.setProperty('--x2', `${x2}vw`)\n      this.node.style.setProperty('--y', `${y}vh`)\n      const label = el('em', 'mschf-dims-label', this.node)\n      label.textContent = `${x2 - x1}vw`\n      el('span', '', this.node) // tick\n    },\n  })\n  A.edgeGlow = () => ({\n    kind: 'edgeGlow',\n    cost: 1,\n    mount(p) {\n      this.nodes = ['top', 'right', 'bottom', 'left'].map(pos =>\n        el('div', `mschf-edge mschf-edge-${pos}`, p)\n      )\n      this.node = { remove: () => this.nodes.forEach(n => n.remove()) }\n    },\n    update(t) {\n      const o = Math.max(0.03, 0.07 * (1 - State.readingPressure * 0.8))\n      const phase = (t / 1000 * 0.2) % 1\n      for (const n of this.nodes) {\n        n.style.setProperty('--o', o.toFixed(3))\n        n.style.setProperty('--p', phase.toFixed(3))\n      }\n    },\n  })\n\n  // =================================================================\n  // X. ORCHESTRATION (BALANCED)\n  // =================================================================\n\n  function composeScene() {\n    // 1. Scaffold (Base layer)\n    mount(A.grid(), 'scaffold')\n    mount(A.rulers(), 'scaffold')\n    mount(A.corners(), 'scaffold') // <-- Re-introduced\n    mount(A.edgeGlow(), 'scaffold')\n\n    // 2. Frame (Structural elements)\n    const frameActors = [A.brackets, A.dims]\n    for (let i = 0; i < 2; i++) {\n      mount(pick(frameActors)(), 'frame')\n    }\n\n    // 3. Ephemera (Content-like details, placed safely)\n    const ephemeraActors = [A.plate, A.specimen]\n    const count = PERF_BASELINE.degrade ? 1 : 2 // Less ephemera on demanding displays\n    for (let i = 0; i < count; i++) {\n      if (Math.random() > State.readingPressure) {\n        mount(pick(ephemeraActors)(), 'ephemera')\n      }\n    }\n  }\n\n  // =================================================================\n  // XI. MAIN LOOP (OPTIMIZED)\n  // =================================================================\n\n  function tick(t) {\n    if (State.paused) return\n    requestAnimationFrame(tick)\n\n    for (const a of State._updaterList) {\n      a.update(t)\n    }\n  }\n\n  // =================================================================\n  // XII. BOOTSTRAP\n  // =================================================================\n\n  function boot() {\n    mountRoot()\n    analyzePageLayout()\n    composeScene()\n\n    State._updaterList = Array.from(State.updaters)\n\n    requestAnimationFrame(tick)\n  }\n\n  document.addEventListener('visibilitychange', () => {\n    State.paused = document.hidden\n    if (!State.paused) requestAnimationFrame(tick)\n  }, false)\n\n  if (document.readyState === 'complete' || document.readyState === 'interactive') {\n    boot()\n  } else {\n    document.addEventListener('DOMContentLoaded', boot)\n  }\n\n  window.__mschfOff = () => {\n    localStorage.setItem('mschf:off', '1')\n    State.root?.remove()\n  }\n  window.__mschfOn = () => {\n    localStorage.removeItem('mschf:off')\n    location.reload()\n  }\n})()\n"],"names":["scope","clamp","v","a","b","pick","arr","css","el","obj","k","tag","cls","parent","n","State","PERF_BASELINE","width","height","area","hiDensity","xl","uhd","HYPERBRUT_PALETTES","pickPalette","base","tokens","applyPaletteTokens","root","key","value","mountRoot","analyzePageLayout","selector","rects","node","r","pCount","rectOverlap","collides","z","findSpot","w","h","i","x","y","rect","mount","actor","family","A","p","top","left","nodes","pos","code","spot","id","side","pad","x1","span","x2","label","t","o","phase","composeScene","frameActors","ephemeraActors","count","tick","boot"],"mappings":"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"}