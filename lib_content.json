{
  "src/_includes/components/embed.njk": "{# components/embed.njk #}\n{% macro embed(url, title, description, opts = {}) %}\n{# opts: { badges?: [{label, tone}], meta?: [{label, value}], tags?: [tag] } #}\n{% set _isInternal = url and url[0] == '/' %}\n<a\n  href=\"{{ _isInternal ? (url | url) : url }}\"\n  class=\"group block rounded-lg border border-base-content/15 bg-base-100/80 backdrop-blur p-4 transition\n         hover:-translate-y-0.5 hover:shadow-xl hover:border-primary/50\n         focus:outline-none focus-visible:ring focus-visible:ring-primary/40 no-underline\"\n  {% if not _isInternal %}target=\"_blank\" rel=\"noopener noreferrer\"{% endif %}\n>\n  <div class=\"mb-1 flex items-center gap-2\">\n    <strong class=\"text-lg text-base-content\">{{ title or 'Untitled' }}</strong>\n    {% if not _isInternal and url %}\n      <span class=\"badge badge-ghost badge-xs\">{{ url | hostname }}</span>\n    {% endif %}\n  </div>\n\n  {% if description %}\n    <p class=\"text-base-content/70 text-sm mb-3\">{{ description }}</p>\n  {% endif %}\n\n  {% if opts.badges and opts.badges.length %}\n    <div class=\"mb-2 flex flex-wrap gap-1\">\n      {% for b in opts.badges %}\n        <span class=\"badge badge-outline badge-xs\">{{ b.label }}</span>\n      {% endfor %}\n    </div>\n  {% endif %}\n\n  <div class=\"text-xs text-base-content/70 space-y-1\">\n    {% if opts.meta and opts.meta.length %}\n      <div class=\"flex flex-wrap gap-x-3 gap-y-1\">\n        {% for m in opts.meta %}\n          <span><span class=\"opacity-60\">{{ m.label }}:</span> {{ m.value }}</span>\n        {% endfor %}\n      </div>\n    {% endif %}\n\n    {% if opts.tags and opts.tags.length %}\n      <div class=\"mt-1\">\n        <strong class=\"text-base-content/60\">Tags:</strong>\n        <span class=\"inline-flex flex-wrap gap-1 pl-1\">\n          {% for tag in opts.tags %}\n            <span class=\"badge badge-outline badge-xs\">#{{ tag }}</span>\n          {% endfor %}\n        </span>\n      </div>\n    {% endif %}\n  </div>\n</a>\n{% endmacro %}\n",
  "src/_includes/components/nav-items.njk": "{# src/_includes/components/nav-items.njk #}\n{# Expected nav shape:\n   [{ title, url, order?, external?, children?: [...] }]\n#}\n{% macro navItems(nav, pageUrl, linkClass='') -%}\n  {% set current = (pageUrl or '/') | url %}\n  {% for n in nav %}\n    {% set href = n.url | url %}\n    {% set isActive = href == current %}\n    {% set isExternal = n.external or (n.url and n.url[0] != '/') %}\n    <li>\n      <a\n        href=\"{{ isExternal ? n.url : href }}\"\n        class=\"transition-colors rounded-sm px-1 py-0.5 {{ linkClass }} {% if isActive %}text-primary{% endif %}\"\n        {% if isExternal %}target=\"_blank\" rel=\"noopener noreferrer\"{% endif %}\n        {% if isActive %}aria-current=\"page\" data-active=\"true\"{% endif %}\n      >\n        {% if n.order %}<span class=\"opacity-60\">{{ n.order }}.</span>{% endif %}\n        <span>{{ n.title | shout }}</span>\n      </a>\n      {% if n.children and n.children.length %}\n        <ul class=\"menu menu-sm pl-3 mt-1\">\n          {{ navItems(n.children, pageUrl, linkClass) }}\n        </ul>\n      {% endif %}\n    </li>\n  {% endfor %}\n{%- endmacro %}\n",
  "src/_includes/components/badge.njk": "{# Badge component (linkable) #}\n{% macro badge(text, href, tone='outline') -%}\n{% set isLink = href and href != '' %}\n{% if isLink %}\n  <a href=\"{{ href[0] == '/' ? (href | url) : href }}\"\n     class=\"badge badge-{{ tone }} badge-sm no-underline transition-colors hover:border-primary hover:text-primary\n            focus:outline-none focus-visible:ring focus-visible:ring-primary/40\">\n    {{ text }}\n  </a>\n{% else %}\n  <span class=\"badge badge-{{ tone }} badge-sm\">{{ text }}</span>\n{% endif %}\n{%- endmacro %}\n",
  "src/_includes/components/products/SpecSheet.njk": "{# components/products/SpecSheet.njk #}\n{% from \"components/products/MarketTable.njk\"    import marketTable %}\n{% from \"components/products/ProvenanceList.njk\" import provenanceList %}\n{% from \"components/products/MetaNotes.njk\"      import metaNotes %}\n\n{% macro specSheet(product) %}\n{% set p = product and product.data or {} %}\n\n{# release + edition #}\n{% set releaseDate  = p.release_date or (p.release_info and p.release_info.release_date) %}\n{% set editionKind  = p.edition and p.edition.kind %}\n{% set editionSize  = (p.release_info and p.release_info.edition_size) or (p.availability and p.availability.unit_count) %}\n{% set msrpMap      = p.pricing and p.pricing.original_msrp %}\n{% set secRange     = p.pricing and p.pricing.secondary_market_range %}\n{% set availabilityIsLimited = p.availability and p.availability.limited %}\n{% set listings = p.market_listings or [] %}\n{% set primaryMarket = (listings | length) and listings[0] or null %}\n\n{# FX context #}\n{% set baseCcy = (build and build.base_currency) or 'USD' %}\n{% set fx      = (build and build.fx) or {} %}\n{% set fxAsOf  = (build and build.fx_asof) %}\n\n{# MSRP choice #}\n{% set msrpCur = null %}\n{% set msrpAmt = null %}\n{% if primaryMarket and primaryMarket.price %}\n  {% set msrpCur = (primaryMarket.currency or baseCcy) | upper %}\n  {% set msrpAmt = primaryMarket.price * 1 %}\n{% elseif msrpMap %}\n  {% for ccy, amt in msrpMap %}\n    {% if loop.first %}{% set msrpCur = ccy | upper %}{% set msrpAmt = amt * 1 %}{% endif %}\n  {% endfor %}\n{% endif %}\n{% set msrpRate = null %}\n{% if msrpCur and (msrpCur == (baseCcy | upper)) %}\n  {% set msrpRate = 1 %}\n{% elseif msrpCur and fx and fx[msrpCur] %}\n  {% set msrpRate = fx[msrpCur] * 1 %}\n{% endif %}\n{% set msrpConverted = null %}\n{% if msrpAmt != null and msrpRate != null %}\n  {% set msrpConverted = msrpAmt * msrpRate %}\n{% endif %}\n\n<section class=\"relative card bg-base-100 border border-base-300/60 shadow-xl rounded-2xl overflow-hidden\n                before:content-[''] before:pointer-events-none before:block before:absolute before:inset-0\n                before:bg-[radial-gradient(1200px_600px_at_0%_-10%,hsl(var(--er)/.10),transparent_40%)]\n                after:content-[''] after:pointer-events-none after:block after:absolute after:inset-0\n                after:bg-[radial-gradient(900px_500px_at_110%_120%,hsl(var(--p)/.10),transparent_40%)]\">\n  <div class=\"card-body gap-4\">\n    <div class=\"flex items-start justify-between gap-3\">\n      <div>\n        <h2 class=\"card-title text-2xl sm:text-3xl tracking-tight\">\n          {{ p.product_title or (p.series and (p.series ~ ' • ' ~ (p.variant or ''))) or p.title or 'Untitled Product' }}\n        </h2>\n        <div class=\"mt-2 flex flex-wrap items-center gap-2\">\n          {% if p.brand %}<span class=\"badge badge-outline\">{{ p.brand | titleizeSlug }}</span>{% endif %}\n          {% if p.line %}<span class=\"badge badge-outline\">{{ p.line | titleizeSlug }}</span>{% endif %}\n          {% if p.character %}\n            <a class=\"badge badge-ghost hover:badge-outline transition\"\n               href=\"{{ '/archives/character/' | url }}{{ (p.character | slug) }}/\">{{ p.character | titleizeSlug }}</a>\n          {% endif %}\n          {% if p.series %}<span class=\"badge badge-ghost\">{{ p.series | titleizeSlug }}</span>{% endif %}\n          {% if p.form %}<span class=\"badge badge-ghost\">{{ p.form | titleizeSlug }}</span>{% endif %}\n        </div>\n      </div>\n      <div class=\"tooltip tooltip-left\" data-tip=\"Availability\">\n        <span class=\"badge {{ availabilityIsLimited ? 'badge-error' : 'badge-success' }} badge-lg\">\n          {{ availabilityIsLimited and 'Limited' or 'Standard' }}\n        </span>\n      </div>\n    </div>\n\n    <div class=\"stats stats-vertical sm:stats-horizontal w-full bg-base-200/40 rounded-xl border border-base-300/50\">\n      <div class=\"stat\">\n        <div class=\"stat-title opacity-70\">Release</div>\n        <div class=\"stat-value text-xl\">\n          {% if releaseDate %}{{ releaseDate | humanDate | safe }}{% else %}TBD{% endif %}\n        </div>\n        {% if p.size and (p.size.h or p.size.w or p.size.d) %}\n          <div class=\"stat-desc\">\n            {{ p.size.h }}{% if p.size.w %}×{{ p.size.w }}{% endif %}{% if p.size.d %}×{{ p.size.d }}{% endif %} {{ p.size.unit or 'cm' }}\n          </div>\n        {% endif %}\n      </div>\n\n      <div class=\"stat\">\n        <div class=\"stat-title opacity-70\">MSRP</div>\n        <div class=\"stat-value text-xl\">\n          {% if msrpAmt != null and msrpCur %}{{ msrpAmt | money(msrpCur) }}{% else %}—{% endif %}\n        </div>\n        {% if msrpConverted != null and (msrpCur|upper) != (baseCcy|upper) %}\n          <div class=\"stat-desc\">≈ {{ msrpConverted | money(baseCcy) }}{% if fxAsOf %} <span class=\"opacity-70\">(as of {{ fxAsOf }})</span>{% endif %}</div>\n        {% endif %}\n        {% if secRange %}\n          {% for ccy, rng in secRange %}\n            {% if loop.first %}<div class=\"stat-desc\">Secondary: {{ ccy }} {{ rng }}</div>{% endif %}\n          {% endfor %}\n        {% endif %}\n      </div>\n\n      <div class=\"stat\">\n        <div class=\"stat-title opacity-70\">Region Lock</div>\n        <div class=\"stat-value text-xl\">{{ (p.distribution and p.distribution.region_lock) | yesNo }}</div>\n        {% if p.distribution and p.distribution.markets and (p.distribution.markets | length) %}\n          <div class=\"stat-desc flex flex-wrap gap-1\">\n            {% for m in p.distribution.markets %}<span class=\"badge badge-sm\">{{ m }}</span>{% endfor %}\n          </div>\n        {% endif %}\n      </div>\n    </div>\n\n    <dl data-testid=\"spec-sheet\" class=\"grid grid-cols-1 sm:grid-cols-12 gap-x-6 gap-y-3 mt-4 text-sm leading-relaxed\">\n      {% if p.variant %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Variant</dt>\n        <dd class=\"sm:col-span-9\">{{ p.variant | titleizeSlug }}</dd>\n      {% endif %}\n\n      {% if editionKind %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Edition</dt>\n        <dd class=\"sm:col-span-9\">\n          <span class=\"badge badge-outline\">{{ editionKind | titleizeSlug }}</span>\n          {% if editionSize %}<span class=\"badge badge-ghost ml-2\">Size: {{ editionSize }}</span>{% endif %}\n        </dd>\n      {% endif %}\n\n      {% if p.colorway %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Colorway</dt>\n        <dd class=\"sm:col-span-9\">{{ p.colorway | safe }}</dd>\n      {% endif %}\n\n      {% if p.articulation %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Articulation</dt>\n        <dd class=\"sm:col-span-9\">{{ p.articulation | safe }}</dd>\n      {% endif %}\n\n      {% if p.materials and (p.materials.shell or p.materials.plush or p.materials.stuffing) %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Materials</dt>\n        <dd class=\"sm:col-span-9\">\n          <ul class=\"list-disc pl-5 space-y-1\">\n            {% if p.materials.shell %}<li><span class=\"opacity-70\">Shell:</span> {{ p.materials.shell | safe }}</li>{% endif %}\n            {% if p.materials.plush %}<li><span class=\"opacity-70\">Plush:</span> {{ p.materials.plush | safe }}</li>{% endif %}\n            {% if p.materials.stuffing %}<li><span class=\"opacity-70\">Stuffing:</span> {{ p.materials.stuffing | safe }}</li>{% endif %}\n          </ul>\n        </dd>\n      {% endif %}\n\n      {% if p.packaging and (p.packaging.type or p.packaging.dimensions_cm) %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Packaging</dt>\n        <dd class=\"sm:col-span-9\">\n          {% if p.packaging.type %}{{ p.packaging.type | safe }}{% endif %}\n          {% if p.packaging.dimensions_cm %}<span class=\"opacity-70\"> — {{ p.packaging.dimensions_cm | safe }}</span>{% endif %}\n        </dd>\n      {% endif %}\n\n      {% if listings and (listings | length) %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Market</dt>\n        <dd class=\"sm:col-span-9\">\n          {{ marketTable(listings, { fx: fx, base: baseCcy, asOf: fxAsOf }) }}\n        </dd>\n      {% endif %}\n\n      {% if p.designer %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Designer</dt>\n        <dd class=\"sm:col-span-9\">{{ p.designer }}</dd>\n      {% endif %}\n\n      {% if p.accessories and (p.accessories | length) %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Accessories</dt>\n        <dd class=\"sm:col-span-9\">\n          <ul class=\"list-disc pl-5 space-y-1\">\n            {% for a in p.accessories %}<li>{{ a | safe }}</li>{% endfor %}\n          </ul>\n        </dd>\n      {% endif %}\n\n      {% if p.provenance_ref %}\n        {% set prov = (p.provenance_ref | provenanceSources) %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Provenance</dt>\n        <dd class=\"sm:col-span-9\">\n          {% if prov and (prov | length) %}\n            {{ provenanceList(prov, { limit: 10, fx: fx, base: baseCcy }) }}\n            <div class=\"mt-2 text-xs opacity-90 space-x-3\">\n              <a class=\"link link-hover\" href=\"{{ p.provenance_ref | provenanceViewerUrl }}\">View .jsonl</a>\n              <a class=\"link\" href=\"{{ p.provenance_ref | provenanceDownloadUrl }}\" download>Download</a>\n              {% if (prov | length) > 10 %}<span class=\"opacity-60\"> · showing 10 of {{ prov | length }}</span>{% endif %}\n            </div>\n          {% else %}\n            <a class=\"link link-primary\" href=\"{{ p.provenance_ref | provenanceViewerUrl }}\">View .jsonl</a>\n            <span class=\"opacity-60\">·</span>\n            <a class=\"link\" href=\"{{ p.provenance_ref | provenanceDownloadUrl }}\" download>Download</a>\n          {% endif %}\n        </dd>\n      {% endif %}\n\n      {% if p.confidence is defined %}\n        {% set confPct = (p.confidence * 100) | round(0, 'floor') %}\n        <dt class=\"sm:col-span-3 text-base-content/70\">Confidence</dt>\n        <dd class=\"sm:col-span-9\">\n          <progress class=\"progress progress-error w-56 align-middle mr-2\" value=\"{{ confPct }}\" max=\"100\"></progress>\n          <span class=\"opacity-70\">{{ confPct }}%</span>\n        </dd>\n      {% endif %}\n    </dl>\n\n    {% if p.Deltas and (p.Deltas | length) %}\n      <div class=\"mt-4\">\n        <div class=\"collapse collapse-arrow border border-base-300/60 bg-base-200/50 rounded-xl\">\n          <input type=\"checkbox\" />\n          <div class=\"collapse-title text-base font-medium\">\n            {{ p.Deltas | length }} change{% if (p.Deltas | length) > 1 %}s{% endif %} in this record\n          </div>\n          <div class=\"collapse-content\">\n            <ul class=\"timeline timeline-vertical\">\n              {% for d in p.Deltas %}\n                <li>\n                  <div class=\"timeline-start\">{{ d.field }}</div>\n                  <div class=\"timeline-middle\"><span class=\"badge badge-error badge-sm\"></span></div>\n                  <div class=\"timeline-end timeline-box prose prose-sm max-w-none\">\n                    <p class=\"m-0\"><strong>{{ d.reason }}</strong></p>\n                    {% if d.from or d.to %}\n<pre class=\"m-0 mt-2 rounded-lg bg-base-300/60 p-3 overflow-x-auto\"><code>from: {{ d.from | safe }}\nto:   {{ d.to   | safe }}</code></pre>\n                    {% endif %}\n                  </div>\n                </li>\n              {% endfor %}\n            </ul>\n          </div>\n        </div>\n      </div>\n    {% endif %}\n\n    {{ metaNotes(p) }}\n  </div>\n</section>\n{% endmacro %}\n",
  "src/_includes/components/products/MetaNotes.njk": "{# components/products/MetaNotes.njk #}\n{% macro metaNotes(p) %}\n{% if p and (p.notes or p.product_id) %}\n  <div class=\"meta-notes rounded-md border border-base-content/15 bg-base-100/80 backdrop-blur p-4 mt-4\" data-testid=\"meta-notes\" role=\"note\">\n    {% if p.notes %}<p class=\"text-base-content/90\">{{ p.notes }}</p>{% endif %}\n\n    {% if p.product_id %}\n      <div class=\"mt-3 flex items-center gap-2\">\n        <code class=\"kbd kbd-sm\">{{ p.product_id }}</code>\n        <button type=\"button\" class=\"btn btn-ghost btn-xs\" data-copy=\"{{ p.product_id }}\" aria-label=\"Copy product ID\">Copy</button>\n        <span class=\"sr-only\" aria-live=\"polite\" data-copy-status></span>\n      </div>\n      <script>\n        (function(){\n          if (window.__copyBound) return; window.__copyBound = true;\n          document.addEventListener('click', function(e){\n            var btn = e.target.closest('[data-copy]'); if(!btn) return;\n            var id = btn.getAttribute('data-copy');\n            try {\n              navigator.clipboard.writeText(id).then(function(){\n                var status = btn.parentElement && btn.parentElement.querySelector('[data-copy-status]');\n                if(status){ status.textContent = 'Copied'; setTimeout(function(){ status.textContent = ''; }, 1600); }\n              });\n            } catch (_) {}\n          }, false);\n        })();\n      </script>\n    {% endif %}\n  </div>\n{% endif %}\n{% endmacro %}\n",
  "src/_includes/components/products/ProvenanceList.njk": "{# components/products/ProvenanceList.njk #}\n{# Usage:\n   {{ provenanceList(provenanceSources(product.data.provenance_ref), { limit: 10, fx: build.fx, base: build.base_currency }) }}\n#}\n{% macro provenanceList(sources, opts = {}) %}\n{% if sources and (sources | length) %}\n  {% set base = (opts.base or (build and build.base_currency) or 'USD') | upper %}\n  {% set fx   = opts.fx or (build and build.fx) or {} %}\n  {% set limit = opts.limit or (sources | length) %}\n\n  <ul class=\"provenance-list not-prose space-y-2\" data-testid=\"provenance\">\n    {% for s in sources | slice(0, limit) %}\n      {% set host = (s.url and (s.url | hostname)) or 'source' %}\n      {% set title = s.title or host %}\n      {% set cur = (s.currency or base) | upper %}\n\n      {# price or midpoint #}\n      {% set price = null %}\n      {% if s.price is defined and s.price != null %}\n        {% set price = s.price * 1 %}\n      {% elseif s.price_min is defined and s.price_max is defined and s.price_min != null and s.price_max != null %}\n        {% set price = ((s.price_min * 1) + (s.price_max * 1)) / 2 %}\n      {% endif %}\n\n      {# conversion #}\n      {% set rate = null %}\n      {% if cur == base %}\n        {% set rate = 1 %}\n      {% elseif fx and fx[cur] %}\n        {% set rate = fx[cur] * 1 %}\n      {% endif %}\n      {% set conv = null %}\n      {% if price != null and rate != null %}\n        {% set conv = price * rate %}\n      {% endif %}\n\n      <li class=\"rounded-box border-2 border-black bg-base-100 p-3 sm:p-4 shadow-[4px_4px_0_rgba(0,0,0,0.85)]\">\n        <div class=\"flex items-start justify-between gap-3\">\n          <div class=\"min-w-0\">\n            {% if s.url %}\n              <a href=\"{{ s.url }}\" class=\"link link-hover font-medium break-words\">{{ title }}</a>\n            {% else %}\n              <span class=\"font-medium\">{{ title }}</span>\n            {% endif %}\n            <div class=\"mt-1 text-xs flex flex-wrap items-center gap-x-2 gap-y-1 opacity-80\">\n              <span class=\"badge badge-ghost badge-xs\">{{ host }}</span>\n              {% if s.market %}<span class=\"badge badge-outline badge-xs\">{{ s.market }}</span>{% endif %}\n              {% if s.retrieved_at %}<time datetime=\"{{ s.retrieved_at }}\">{{ s.retrieved_at | humanDate | safe }}</time>{% endif %}\n            </div>\n          </div>\n\n          <div class=\"text-right whitespace-nowrap\">\n            {% if price != null %}\n              <div class=\"font-semibold\">{{ price | money(cur) }}</div>\n            {% else %}\n              <div class=\"opacity-50\">—</div>\n            {% endif %}\n            {% if conv != null and cur != base %}\n              <div class=\"text-xs opacity-80\">≈ {{ conv | money(base) }}</div>\n            {% endif %}\n          </div>\n        </div>\n      </li>\n    {% endfor %}\n  </ul>\n\n  {% if (sources | length) > limit %}\n    <details class=\"mt-3\">\n      <summary class=\"cursor-pointer\">Show {{ (sources | length) - limit }} more source(s)</summary>\n      <ul class=\"mt-2 space-y-2\">\n        {% for s in sources | slice(limit, (sources | length) - limit) %}\n          <li class=\"text-sm\">\n            {% if s.url %}<a class=\"link link-hover\" href=\"{{ s.url }}\">{{ s.title or (s.url | hostname) }}</a>{% else %}{{ s.title or 'source' }}{% endif %}\n          </li>\n        {% endfor %}\n      </ul>\n    </details>\n  {% endif %}\n{% endif %}\n{% endmacro %}\n",
  "src/_includes/components/products/MarketTable.njk": "{# components/products/MarketTable.njk #}\n{# Usage:\n   {{ marketTable(product.data.market_listings, { fx: build.fx, base: build.base_currency, asOf: build.fx_asof }) }}\n#}\n{% macro marketTable(listings, opts = {}) %}\n{% if listings and (listings | length) %}\n  {# FX context #}\n  {% set base = (opts.base or (build and build.base_currency) or 'USD') | upper %}\n  {% set fx   = opts.fx or (build and build.fx) or {} %}\n  {% set asOf = opts.asOf or (build and build.fx_asof) %}\n\n  {# Precompute stats #}\n  {% set convMin   = null %}\n  {% set convMax   = null %}\n  {% set convSum   = 0 %}\n  {% set convCount = 0 %}\n\n  {% for l in listings %}\n    {% set cur = (l.currency or base) | upper %}\n    {# pick a representative price #}\n    {% set price = null %}\n    {% if l.price is defined and l.price != null %}\n      {% set price = l.price * 1 %}\n    {% elseif l.price_min is defined and l.price_max is defined and l.price_min != null and l.price_max != null %}\n      {% set price = ((l.price_min * 1) + (l.price_max * 1)) / 2 %}\n    {% endif %}\n\n    {% set rate = null %}\n    {% if cur == base %}\n      {% set rate = 1 %}\n    {% elseif fx and fx[cur] %}\n      {% set rate = fx[cur] * 1 %}\n    {% endif %}\n\n    {% if price != null and rate != null %}\n      {% set conv = price * rate %}\n      {% if convMin == null or conv < convMin %}{% set convMin = conv %}{% endif %}\n      {% if convMax == null or conv > convMax %}{% set convMax = conv %}{% endif %}\n      {% set convSum   = convSum + conv %}\n      {% set convCount = convCount + 1 %}\n    {% endif %}\n  {% endfor %}\n\n  <div class=\"overflow-x-auto rounded-box border-2 border-black bg-base-100 shadow-[6px_6px_0_rgba(0,0,0,0.85)]\">\n    <table data-testid=\"market-table\" class=\"table table-sm\">\n      <caption class=\"caption-top text-xs font-semibold tracking-wide uppercase text-base-content/80\">\n        Market Listings\n        {% if convCount > 0 %}\n          <span class=\"opacity-70\"> · Converted to {{ base }}</span>\n          {% if asOf %}<span class=\"opacity-60\"> (as of {{ asOf }})</span>{% endif %}\n        {% elseif fx and (fx | length) == 0 %}\n          <span class=\"opacity-60\"> · no FX available</span>\n        {% endif %}\n      </caption>\n      <thead class=\"sticky top-0 bg-base-200 z-10\">\n        <tr>\n          <th scope=\"col\" class=\"w-[40%]\">Market</th>\n          <th scope=\"col\" class=\"text-right w-[30%]\">Listed</th>\n          <th scope=\"col\" class=\"text-right w-[30%]\">≈ {{ base }}</th>\n        </tr>\n      </thead>\n      <tbody>\n        {% for l in listings | sort(false,false,'market') %}\n          {% set cur = (l.currency or base) | upper %}\n          {% set price = null %}\n          {% if l.price is defined and l.price != null %}\n            {% set price = l.price * 1 %}\n          {% elseif l.price_min is defined and l.price_max is defined and l.price_min != null and l.price_max != null %}\n            {% set price = ((l.price_min * 1) + (l.price_max * 1)) / 2 %}\n          {% endif %}\n\n          {% set rate = null %}\n          {% if cur == base %}\n            {% set rate = 1 %}\n          {% elseif fx and fx[cur] %}\n            {% set rate = fx[cur] * 1 %}\n          {% endif %}\n\n          {% set converted = null %}\n          {% if price != null and rate != null %}\n            {% set converted = price * rate %}\n          {% endif %}\n\n          <tr>\n            <td class=\"align-top\">\n              {% if l.url %}<a href=\"{{ l.url }}\" class=\"link link-hover\">{{ l.market or 'Market' }}</a>\n              {% else %}{{ l.market or 'Market' }}{% endif %}\n              {% if l.note %}<div class=\"text-xs opacity-70 mt-0.5\">{{ l.note }}</div>{% endif %}\n            </td>\n            <td class=\"text-right align-top whitespace-nowrap\">\n              {% if l.price is defined and l.price != null %}\n                {{ (l.price * 1) | money(cur) }}\n              {% elseif l.price_min is defined and l.price_max is defined and l.price_min != null and l.price_max != null %}\n                {{ (l.price_min * 1) | money(cur) }}–{{ (l.price_max * 1) | money(cur) }}\n              {% else %}\n                —\n              {% endif %}\n              {% if cur != base %}<span class=\"badge badge-ghost badge-xs ml-2\">{{ cur }}</span>{% endif %}\n            </td>\n            <td class=\"text-right align-top whitespace-nowrap\">\n              {% if converted != null %}\n                {{ converted | money(base) }}\n              {% else %}\n                <span class=\"opacity-50\">n/a</span>\n              {% endif %}\n            </td>\n          </tr>\n        {% endfor %}\n      </tbody>\n\n      {% if convCount > 0 %}\n        {% set convAvg = convSum / convCount %}\n        <tfoot>\n          <tr>\n            <th scope=\"row\" class=\"text-right\">Min · Avg · Max</th>\n            <td></td>\n            <td class=\"text-right\">\n              <span class=\"font-medium\">{{ convMin | money(base) }}</span>\n              <span class=\"opacity-60\"> · </span>\n              <span class=\"font-medium\">{{ convAvg | money(base) }}</span>\n              <span class=\"opacity-60\"> · </span>\n              <span class=\"font-medium\">{{ convMax | money(base) }}</span>\n            </td>\n          </tr>\n        </tfoot>\n      {% endif %}\n    </table>\n  </div>\n{% endif %}\n{% endmacro %}\n",
  "src/_includes/components/back-link.njk": "{# src/_includes/components/back-link.njk #}\n{% from \"components/icons.njk\" import icon %}\n{% macro backLink(label='Back', fallback='/' ) %}\n<a\n  href=\"{{ fallback }}\"\n  class=\"btn btn-ghost btn-sm gap-1 no-underline focus-visible:ring focus-visible:ring-primary/40\"\n  aria-label=\"{{ label }}\"\n  title=\"{{ label }}\"\n  onclick=\"try{if(document.referrer && new URL(document.referrer).origin===location.origin){event.preventDefault();history.back();}}catch(_){/* noop */}\"\n>\n  <span class=\"pointer-events-none\">\n    {{ icon('arrow-left', { class: 'w-4 h-4', 'aria-hidden': 'true' }) }}\n  </span>\n  <span class=\"pointer-events-none\">{{ label }}</span>\n</a>\n{% endmacro %}\n",
  "src/_includes/components/footer.njk": "{# src/_includes/components/footer.njk #}\n{% from \"components/ext-link.njk\" import extLink %}\n{% macro footer(buildTime) %}\n  <footer class=\"mt-16 p-8 text-center text-sm text-text/60 border-top border-base-200 bg-base-100/80 backdrop-blur\">\n    <span class=\"block font-mono text-xs tracking-widest mb-2\" data-build=\"{{ buildTime }}\">\n      <time datetime=\"{{ buildTime }}\">{{ buildTime }}</time>\n    </span>\n    &copy; {{ (buildTime or '2025-01-01') | date('yyyy') }} Effusion Labs. A space for creative synthesis.\n    <div class=\"mt-2\">{{ extLink('https://github.com/toxicwind/effusion-labs', 'GitHub') }}</div>\n  </footer>\n{% endmacro %}\n",
  "src/_includes/components/pathway.njk": "{# src/_includes/components/pathway.njk #}\n{% macro pathway(path) %}\n<nav class=\"flex items-center gap-2 text-sm\" aria-label=\"Breadcrumb\">\n  {% for node in path %}\n    {% if not loop.first %}<span aria-hidden=\"true\" class=\"opacity-60\">→</span>{% endif %}\n    <a href=\"{{ node.url[0] == '/' ? (node.url | url) : node.url }}\"\n       class=\"link link-hover underline-offset-2 decoration-dotted rounded-sm px-0.5\n              focus:outline-none focus-visible:ring focus-visible:ring-primary/40\">\n      {{ node.title }}\n    </a>\n  {% endfor %}\n</nav>\n{% endmacro %}\n",
  "src/_includes/components/hero-tile.njk": "{# components/hero-tile.njk #}\n{% macro heroTile(type, title, description, href, primary=false) %}\n  {# normalize inputs #}\n  {% set _type  = type or '' %}\n  {% set _title = title or '' %}\n  {% set _desc  = description or '' %}\n  {% set _href  = href or '#' %}\n\n  {# internal links go through |url; avoid ternary and keep control logic outside attributes #}\n  {% if _href and _href[0] == '/' %}\n    {% set _href = _href | url %}\n  {% endif %}\n\n  {# build class string without inline conditionals #}\n  {% set _cls = 'group block hb-tile transition p-6 text-left no-underline hover:-translate-y-0.5 focus:outline-none focus-visible:ring focus-visible:ring-primary/40 ' %}\n  {% if primary %}\n    {% set _cls = _cls ~ 'border-primary/60 ring-1 ring-primary/20 bg-gradient-to-br from-primary/5 to-transparent ' %}\n  {% else %}\n    {% set _cls = _cls ~ 'border-base-content/15 ' %}\n  {% endif %}\n\n  <a href=\"{{ _href }}\" class=\"{{ _cls }}\">\n    {% if _type %}<span class=\"badge badge-ghost badge-xs uppercase tracking-wider\">{{ _type | safe }}</span>{% endif %}\n    {% if _title %}<h3 class=\"mt-2 font-heading text-lg text-base-content group-hover:text-primary transition-colors\">{{ _title | safe }}</h3>{% endif %}\n    {% if _desc %}<p class=\"text-sm text-base-content/90\">{{ _desc | safe }}</p>{% endif %}\n  </a>\n{% endmacro %}\n",
  "src/_includes/components/kpis.njk": "{% macro kpis(links) %}\n<div class=\"grid gap-4 sm:grid-cols-2 md:grid-cols-4\">\n  {% for l in links %}\n  <a\n    href=\"{{ l.url[0] == '/' ? (l.url | url) : l.url }}\"\n    class=\"block rounded border border-base-content/15 bg-base-100/80 backdrop-blur p-4\n           transition hover:-translate-y-0.5 hover:shadow-xl hover:border-primary/50\n           focus:outline-none focus-visible:ring focus-visible:ring-primary/40 no-underline\"\n  >\n    {{ l.title }}{% if l.count is not undefined %} <span class=\"text-sm text-base-content/70\">({{ l.count }})</span>{% endif %}\n  </a>\n  {% endfor %}\n</div>\n{% endmacro %}\n",
  "src/_includes/components/feed-entry.njk": "{# Feed entry: daisyUI-flavored card link #}\n{% macro feedEntry(item) -%}\n{% set t = (item.type or item.data.type) | lower %}\n<li data-type=\"{{ t }}\">\n  <a href=\"{{ item.url | url }}\" class=\"group block h-full hb-tile with-rail p-5 sm:p-6 transition-colors text-left no-underline\"\n     data-title=\"{{ item.data.title }}\" data-date=\"{{ item.date | date('yyyy-MM-dd') }}\">\n    <div>\n      {% set typeClass = 'pill--meta' %}\n      {% if t == 'project' %}{% set typeClass = 'pill--project' %}{% elif t == 'concept' %}{% set typeClass = 'pill--concept' %}\n      {% elif t == 'spark' %}{% set typeClass = 'pill--spark' %}{% elif t == 'meta' %}{% set typeClass = 'pill--meta' %}{% endif %}\n      <div class=\"flex items-start justify-between\">\n        <span class=\"pill {{ typeClass }}\">{{ (item.type or item.data.type) | capitalize }}</span>\n        {% if item.date %}\n          <time datetime=\"{{ item.date | htmlDateString }}\" class=\"text-[0.7rem] opacity-90\">\n            {{ item.date | readableDate }}\n          </time>\n        {% endif %}\n      </div>\n      <h3 class=\"font-heading text-base-content text-lg leading-tight group-hover:text-primary transition-colors\">\n        {{ item.data.title }}\n      </h3>\n      {% if item.data.description %}\n        <p class=\"text-sm text-base-content/90 line-clamp-2\">\n          {{ item.data.description | truncate(140, true, '…') }}\n        </p>\n      {% endif %}\n    </div>\n  </a>\n</li>\n{%- endmacro %}\n",
  "src/_includes/components/work-feed.njk": "{# components/work-feed.njk #}\n{% from \"components/feed-entry.njk\" import feedEntry %}\n<section aria-labelledby=\"work-heading\" class=\"space-y-4\">\n  <h2 id=\"work-heading\" class=\"text-2xl font-heading hb-ink\">Work</h2>\n\n  <div class=\"hb-inlay p-3 sm:p-4\" role=\"toolbar\" aria-label=\"Filter work\">\n    <div class=\"filters flex flex-wrap gap-2\">\n      <button class=\"btn btn-primary btn-sm\" data-filter=\"all\" aria-pressed=\"true\">All</button>\n      <button class=\"btn btn-tone tone-project btn-sm\" data-filter=\"project\" aria-pressed=\"false\">Projects</button>\n      <button class=\"btn btn-tone tone-concept btn-sm\" data-filter=\"concept\" aria-pressed=\"false\">Concepts</button>\n      <button class=\"btn btn-tone tone-spark btn-sm\" data-filter=\"spark\" aria-pressed=\"false\">Sparks</button>\n      <button class=\"btn btn-tone tone-meta btn-sm\" data-filter=\"meta\" aria-pressed=\"false\">Meta</button>\n    </div>\n  </div>\n\n  <ul id=\"work-list\" class=\"list-none grid gap-4 md:gap-6 lg:gap-8 auto-rows-[1fr] items-stretch grid-cols-[repeat(auto-fit,minmax(22rem,1fr))]\">\n    {% for item in work %}\n      {{ feedEntry(item) }}\n    {% endfor %}\n  </ul>\n\n  <div class=\"more\">\n    <a class=\"btn btn-primary\" href=\"{{ '/work' | url }}\">Browse all work</a>\n  </div>\n</section>\n",
  "src/_includes/components/tile.njk": "{# components/tile.njk #}\n{% macro tile(item) %}\n<a\n  href=\"{{ item.url | url }}\"\n  aria-label=\"{{ item.data.title }}\"\n  class=\"group block rounded-lg border border-base-content/15 bg-base-100/80 backdrop-blur p-4 transition\n         hover:-translate-y-0.5 hover:shadow-xl hover:border-primary/50\n         focus:outline-none focus-visible:ring focus-visible:ring-primary/40 no-underline\"\n  data-title=\"{{ item.data.title }}\" data-date=\"{{ item.date | date('yyyy-MM-dd') }}\"\n>\n  {% if item.data.image %}\n    <div class=\"mb-2 aspect-[4/3] overflow-hidden rounded bg-base-200/60\">\n      <img src=\"{{ item.data.image }}\" alt=\"\" class=\"h-full w-full object-cover\" loading=\"lazy\" />\n    </div>\n  {% else %}\n    <div class=\"mb-2 aspect-[4/3] rounded bg-base-200/60\"></div>\n  {% endif %}\n\n  <div class=\"flex items-center justify-between text-xs text-base-content/70\">\n    <span class=\"capitalize\">{{ item.data.type }}</span>\n    {% if item.date %}\n      <time datetime=\"{{ item.date | htmlDateString }}\">{{ item.date | readableDate }}</time>\n    {% endif %}\n  </div>\n\n  <h3 class=\"mt-2 font-heading text-lg text-base-content transition-colors group-hover:text-primary\">\n    {{ item.data.title }}\n  </h3>\n</a>\n{% endmacro %}\n",
  "src/_includes/components/icons.njk": "{% macro icon(name, attrs = {}) %}\n  {# If name has a prefix (mdi:, heroicons-outline:, etc.) use Iconify;\n     else assume lucide filter server-side. #}\n  {% if name and (\":\" in name) %}\n    <iconify-icon icon=\"{{ name }}\"{% for k,v in attrs %} {{ k }}=\"{{ v }}\"{% endfor %}></iconify-icon>\n  {% else %}\n    {{ name | lucide(attrs) | safe }}\n  {% endif %}\n{% endmacro %}\n",
  "src/_includes/components/hero.njk": "{# components/hero.njk #}\n{% from \"components/hero-tile.njk\" import heroTile %}\n\n{# Precompute booleans to keep the markup clean #}\n{% set hasBrand = branding and (branding.logoSrc or branding.logoAlt or branding.logoSizes) %}\n{% set hasCtas  = ctas and (ctas | length) %}\n{% set hasTiles = tiles and (tiles | length) %}\n{% set hasBuild = build and (build.branch or build.hash or build.builtAtIso) %}\n\n<header class=\"hero relative mx-auto w-full hb-neon hb-intensity-bold\">\n  <div class=\"container-fluid px-4 sm:px-6 lg:px-8 py-[clamp(3rem,8vh,9rem)]\">\n    <div class=\"hb-inlay mx-auto max-w-[min(100rem,92vw)] px-8 sm:px-12 py-10 text-center\">\n\n      {% if hasBrand %}\n        {# build img attributes outside the tag to avoid control tags inside an attribute #}\n        {% set _logoSrc = (branding.logoSrc or '') | url %}\n        {% set _logoAlt = branding.logoAlt or 'Logo' %}\n        {% set _logoSizes = branding.logoSizes or '' %}\n        <img class=\"hero-logo mx-auto mb-6 w-28 md:w-40\"\n             src=\"{{ _logoSrc }}\"\n             alt=\"{{ _logoAlt }}\"{% if _logoSizes %} sizes=\"{{ _logoSizes }}\"{% endif %}\n             loading=\"eager\" fetchpriority=\"high\"\n             style=\"filter: drop-shadow(0 0 12px color-mix(in oklab, var(--neon-a) 30%, transparent));\" />\n      {% endif %}\n\n      {% if eyebrow %}\n        <p class=\"font-mono text-xs uppercase tracking-[0.18em] hb-ink-soft\">{{ eyebrow }}</p>\n      {% endif %}\n\n      <h1 class=\"font-heading font-black uppercase tracking-[-0.025em] leading-[0.95] text-[clamp(2.75rem,6vw,6.5rem)] hb-ink\">\n        {{ title or '' }}\n      </h1>\n\n      {% if lede %}<p class=\"mx-auto mt-4 max-w-3xl font-body text-base md:text-lg hb-ink-soft\">{{ lede }}</p>{% endif %}\n      {% if sublede %}<p class=\"mx-auto mt-2 max-w-3xl font-body text-base md:text-lg hb-ink-soft\">{{ sublede }}</p>{% endif %}\n\n      {% if hasCtas %}\n        <div class=\"mt-6 flex flex-col items-center justify-center gap-4 sm:flex-row\">\n          {% for c in ctas %}\n            {% set _label = c.label or 'Learn more' %}\n            {# Let Eleventy’s |url handle both relative and absolute; avoids brittle startsWith checks #}\n            {% set _href  = (c.href or '#') | url %}\n            {% set _kind  = c.kind or 'primary' %}\n            {% set _btn   = (_kind == 'primary') and 'btn btn-primary' or 'btn btn-outline' %}\n            <a href=\"{{ _href }}\" class=\"{{ _btn }} px-7 py-3 font-heading font-bold\">{{ _label }}</a>\n          {% endfor %}\n        </div>\n      {% endif %}\n    </div>\n\n    {% if hasTiles %}\n      <div class=\"mt-10 grid gap-4 sm:grid-cols-3\">\n        {% for t in tiles %}\n          {{ heroTile(t.k, t.h, t.s, t.url, t.featured or false) }}\n        {% endfor %}\n      </div>\n    {% endif %}\n\n    {% if hasBuild %}\n      <div class=\"mt-8 text-center font-mono text-[11px] hb-ink-soft\">\n        {# join pieces with separators only when present #}\n        {% set _parts = [] %}\n        {% if build.branch %}{% set _parts = _parts | push(build.branch) %}{% endif %}\n        {% if build.hash %}{% set _parts = _parts | push(build.hash) %}{% endif %}\n        {% if build.builtAtIso %}{% set _parts = _parts | push(build.builtAtIso) %}{% endif %}\n        {{ _parts | join(' · ') }}\n      </div>\n    {% endif %}\n  </div>\n</header>\n",
  "src/_includes/components/ext-link.njk": "{# External link component #}\n{% from \"components/icons.njk\" import icon %}\n{% macro extLink(url, text) -%}\n<a href=\"{{ url }}\" class=\"external-link link link-hover inline-flex items-center gap-1\"\n   target=\"_blank\" rel=\"noopener noreferrer\" data-external=\"true\">\n  <span>{{ text }}</span>\n  <span aria-hidden=\"true\" class=\"inline-block\">{{ icon('external-link', { class: 'w-4 h-4', 'aria-hidden': 'true' }) }}</span>\n  <span class=\"sr-only\">(opens in a new tab)</span>\n</a>\n{%- endmacro %}\n",
  "src/_includes/components/feed-section.njk": "{# Feed section wrapper #}\n{% from \"components/section.njk\" import section %}\n{% from \"components/feed-entry.njk\" import feedEntry %}\n{% macro feedSection(title, url, items) -%}\n  {% call section(title, url) %}\n    <ul class=\"space-y-4\">\n      {% for item in items %}\n        {{ feedEntry(item) }}\n      {% endfor %}\n    </ul>\n  {% endcall %}\n{%- endmacro %}\n",
  "src/_includes/components/pagination.njk": "{# DaisyUI-styled pagination #}\n{% macro pager(pagination) %}\n<nav class=\"flex items-center justify-between gap-4 mt-12 text-sm font-mono\" aria-label=\"Pagination\">\n  {% if pagination.href.previous %}\n    <a href=\"{{ pagination.href.previous | url }}\" class=\"btn btn-sm btn-ghost gap-2\">← Newer</a>\n  {% else %}\n    <span class=\"opacity-30\">← Newer</span>\n  {% endif %}\n\n  <span class=\"px-4 py-2 rounded-box bg-base-200 text-base-content/70\">\n    Page {{ pagination.pageNumber + 1 }} of {{ pagination.pages.length }}\n  </span>\n\n  {% if pagination.href.next %}\n    <a href=\"{{ pagination.href.next | url }}\" class=\"btn btn-sm btn-ghost gap-2\">Older →</a>\n  {% else %}\n    <span class=\"opacity-30\">Older →</span>\n  {% endif %}\n</nav>\n{% endmacro %}\n",
  "src/_includes/components/archive-nav.njk": "{# components/archive-nav.njk #}\n{% macro archiveNav(path, nav) %}\n  {% set items = nav[path] or [] %}\n  {% if items.length %}\n  <ul class=\"menu menu-sm p-0\">\n    {% for item in items %}\n      <li>\n        <a href=\"{{ item.url | url }}\" class=\"flex items-center justify-between rounded-sm\n                   focus:outline-none focus-visible:ring focus-visible:ring-primary/40\">\n          <span>{{ item.title }}</span>\n          <span class=\"badge badge-ghost badge-xs\">{{ item.count }}</span>\n        </a>\n      </li>\n    {% endfor %}\n  </ul>\n  {% endif %}\n{% endmacro %}\n",
  "src/_includes/components/section.njk": "{# components/section.njk #}\n{% macro section(title, url) -%}\n<section class=\"space-y-6\">\n  <div class=\"flex items-baseline justify-between\">\n    <h2 class=\"font-heading text-2xl text-base-content\">{{ title }}</h2>\n    {% if url %}\n      <a\n        href=\"{{ url }}\"\n        class=\"link link-hover text-sm rounded-sm px-1 focus:outline-none focus-visible:ring focus-visible:ring-primary/40\"\n      >\n        View all →\n      </a>\n    {% endif %}\n  </div>\n  {{ caller() }}\n</section>\n{%- endmacro %}",
  "src/_includes/components/map-cta.njk": "{# components/map-cta.njk #}\n<section aria-labelledby=\"map-heading\" class=\"hb-neon hb-intensity-lite\">\n  <div class=\"container-fluid px-4 sm:px-6 lg:px-8 text-center space-y-4 py-[clamp(2rem,6vh,6rem)]\">\n    <div class=\"hb-inlay mx-auto max-w-3xl p-6 sm:p-8\">\n      <h2 id=\"map-heading\" class=\"text-2xl font-heading hb-ink\">Explore the Interactive Concept Map</h2>\n      <p class=\"mx-auto max-w-prose text-lg hb-ink-soft\">Navigate the living knowledge graph that links every spark, concept, and project in the lab.</p>\n      <a href=\"{{ '/map/' | url }}\" class=\"btn btn-primary mt-2\">Launch the Map</a>\n    </div>\n  </div>\n</section>\n",
  "src/_includes/components/neon-card.njk": "{% macro neonCard(opts = {}) %}\n  {# opts: { title?: string, bodyCls?: string, sectionCls?: string, intensity?: 'lite'|'bold', neon?: bool, frame?: 'ring'|'none', rail?: bool } #}\n  {% set _title = opts.title or '' %}\n  {% set _bodyCls = 'px-5 py-4 sm:px-6 sm:py-5 ' ~ (opts.bodyCls or '') %}\n  {% set _intensity = opts.intensity or 'lite' %}\n  {% set _neon = (opts.neon is not defined) or (opts.neon != false) %}\n  {% set _frame = opts.frame or 'ring' %}\n  {% set _rail = (opts.rail is not defined) or (opts.rail != false) %}\n  {% set _sectionCls = (opts.sectionCls or '') + ' ' + ('hb-intensity-' ~ _intensity) %}\n  {% set _cls = ['card','rounded-box','hb-anim',_sectionCls] %}\n  {% if _neon %}{% set _cls = _cls.concat(['hb-neon']) %}{% endif %}\n  {% if _rail %}{% set _cls = _cls.concat(['hb-accent']) %}{% endif %}\n  {% if _frame == 'ring' %}{% set _cls = _cls.concat(['shadow-xs','ring-1','ring-base-300/35','border-transparent']) %}{% else %}{% set _cls = _cls.concat(['shadow-none','border-transparent']) %}{% endif %}\n  <section class=\"{{ _cls | join(' ') }}\">\n    <div class=\"card-body {{ _bodyCls }}\">\n      {% if _title %}\n        <h2 class=\"text-[11px] uppercase tracking-widest opacity-60 hb-title\">{{ _title }}</h2>\n      {% endif %}\n      {{ caller() }}\n    </div>\n  </section>\n{% endmacro %}\n",
  "src/_includes/components/header.njk": "{# src/_includes/components/header.njk #}\n{% from \"components/nav-items.njk\" import navItems %}\n{% from \"components/icons.njk\" import icon %}\n\n{% macro header(nav, page) %}\n  {% set navLabel = 'Primary navigation' %}\n  <header data-site-header class=\"relative w-full bg-base-100 border-b border-base-content/10\">\n    <div class=\"navbar container-fluid px-6\">\n      <!-- Brand -->\n      <div class=\"flex-1\">\n        <a href=\"{{ '/' | url }}\" class=\"flex items-center gap-2 font-heading text-3xl text-primary no-underline\">\n          {{ icon('flask-conical', { class: 'w-6 h-6', 'aria-hidden': 'true' }) }}\n          <span>{{ 'Effusion Labs' | shout }}</span>\n        </a>\n      </div>\n\n      <!-- Mobile nav -->\n      <div class=\"flex-none lg:hidden\">\n        <nav class=\"dropdown dropdown-end\" aria-label=\"{{ navLabel }}\">\n          <label tabindex=\"0\" class=\"btn btn-ghost btn-square\" aria-label=\"Open menu\">\n            {{ icon('menu', { class: 'w-6 h-6', 'aria-hidden': 'true' }) }}\n          </label>\n          <ul tabindex=\"0\" class=\"menu menu-sm dropdown-content mt-3 z-[100] p-2 shadow bg-base-100 rounded-box w-56\" role=\"menu\">\n            {{ navItems(nav, page.url) }}\n          </ul>\n        </nav>\n      </div>\n\n      <!-- Desktop nav + theme toggle -->\n      <div class=\"flex-none flex items-center gap-2\">\n        <nav class=\"hidden lg:flex\" aria-label=\"{{ navLabel }}\">\n          <ul class=\"menu menu-horizontal px-1\">\n            {{ navItems(nav, page.url, 'link-underline hover:text-primary') }}\n          </ul>\n        </nav>\n\n        <button\n          id=\"theme-toggle\"\n          class=\"btn btn-ghost btn-square\"\n          type=\"button\"\n          aria-pressed=\"false\"\n          aria-label=\"Switch theme\"\n          title=\"Toggle theme\"\n        >\n          <span class=\"lucide-sun\">{{ icon('sun', { class: 'w-6 h-6', 'aria-hidden': 'true' }) }}</span>\n          <span class=\"lucide-moon hidden\">{{ icon('moon', { class: 'w-6 h-6', 'aria-hidden': 'true' }) }}</span>\n        </button>\n      </div>\n    </div>\n  </header>\n{% endmacro %}\n",
  "src/_includes/components/resume/expander.njk": "{# components/resume/Expander.njk #}\n{% macro expander(title, opts = {}) %}\n{% set o = opts or {} %}\n{% set subtitle = o.subtitle %}\n{% set badge = o.badge %}\n{% set href = o.href %}\n<details class=\"group rounded-xl border border-base-300/70 bg-base-100/80 p-3 sm:p-4 hover:border-primary/50 transition\">\n  <summary class=\"flex items-center justify-between gap-3 cursor-pointer list-none\">\n    <div class=\"min-w-0\">\n      <div class=\"flex items-center gap-2\">\n        <span class=\"font-semibold tracking-tight\">{{ title }}</span>\n        {% if badge %}<span class=\"badge badge-neutral badge-xs rounded-full chip-elevated\">{{ badge }}</span>{% endif %}\n      </div>\n      {% if subtitle %}\n        <p class=\"mt-0.5 text-xs opacity-80 truncate ink-soft\">{{ subtitle }}</p>\n      {% endif %}\n      {% if href %}\n        <p class=\"mt-1 text-xs\"><a class=\"link link-hover\" href=\"{{ href }}\" target=\"_blank\" rel=\"noopener\">View project</a></p>\n      {% endif %}\n    </div>\n    <span class=\"shrink-0 inline-flex items-center justify-center w-7 h-7 rounded-md border border-base-300/60\">\n      {{ \"chevron-down\" | lucide({ width: 16, height: 16, class: \"transition-transform group-open:rotate-180\" }) | safe }}\n    </span>\n  </summary>\n\n  <div class=\"mt-3\">\n    {{ caller() }}\n  </div>\n</details>\n{% endmacro %}\n",
  "src/_includes/components/meta-aside.njk": "{# src/_includes/components/meta-aside.njk #}\n{% macro metaAside(status, date, certainty, importance, tags, memory_ref) %}\n  <aside class=\"w-full mt-10 xl:mt-0 xl:pl-6 xl:border-l xl:border-base-content/10 text-sm opacity-90\">\n    <div class=\"xl:sticky xl:top-28 space-y-3\">\n      <h2 class=\"font-heading text-base uppercase tracking-widest opacity-70\">Meta</h2>\n      <ul class=\"space-y-1\">\n        {% if status %}<li><strong>Status:</strong> {{ status }}</li>{% endif %}\n        {% if date %}\n          <li><strong>Date:</strong> <time datetime=\"{{ date | htmlDateString }}\">{{ date | readableDate }}</time></li>\n        {% endif %}\n        {% if certainty %}<li><strong>Certainty:</strong> {{ certainty }}</li>{% endif %}\n        {% if importance %}<li><strong>Importance:</strong> {{ importance }}</li>{% endif %}\n        {% if tags %}\n          <li><strong>Tags:</strong>\n            <div class=\"mt-1 flex flex-wrap gap-1\">\n              {% for tag in tags %}\n                <a class=\"badge badge-outline badge-xs no-underline\" href=\"{{ '/tags/' | url }}{{ tag | slug }}/\">#{{ tag }}</a>\n              {% endfor %}\n            </div>\n          </li>\n        {% endif %}\n        {% if memory_ref %}\n          <li><strong>Memory Ref:</strong>\n            <ul class=\"pl-4 list-disc\">{% for ref in memory_ref %}<li>{{ ref }}</li>{% endfor %}</ul>\n          </li>\n        {% endif %}\n      </ul>\n    </div>\n  </aside>\n{% endmacro %}\n",
  "src/_includes/components/resume-entry.njk": "{% macro resumeEntry(job) %}\n<article class=\"hb-row hb-anim mb-3\">\n  <h3 class=\"text-lg font-semibold tracking-tight m-0\">\n    {{ job.company }}{% if job.role %} <span class=\"font-normal\">— {{ job.role }}</span>{% endif %}\n  </h3>\n  <div class=\"text-xs md:text-sm opacity-70\">\n    <span>{{ job.location }}</span>\n    <span class=\"mx-2 hidden md:inline\">•</span>\n    <span class=\"block md:inline\">{{ job.start }}{% if job.end %} — {{ job.end }}{% else %} — Now{% endif %}</span>\n  </div>\n  {% if job.highlights %}\n    <ul class=\"mt-2 space-y-1.5 text-[15px] leading-6\">\n      {% for h in job.highlights %}<li class=\"hb-minirow\">{{ h }}</li>{% endfor %}\n    </ul>\n  {% endif %}\n</article>\n{% endmacro %}\n",
  "src/_includes/components/list-item.njk": "{# components/list-item.njk #}\n{% macro listItem(item) %}\n<a\n  href=\"{{ item.url | url }}\"\n  aria-label=\"{{ item.data.title }}\"\n  class=\"group block surface-solid slab no-elevate with-rail p-5 sm:p-6 transition-colors hover:border-base-300 text-left no-underline\"\n  data-title=\"{{ item.data.title }}\" data-date=\"{{ item.date | date('yyyy-MM-dd') }}\"\n>\n  <div>\n    {% set t = (item.data.type or item.type) | lower %}\n    {% set typeClass = 'pill--meta' %}\n    {% if t == 'project' %}{% set typeClass = 'pill--project' %}{% elif t == 'concept' %}{% set typeClass = 'pill--concept' %}\n    {% elif t == 'spark' %}{% set typeClass = 'pill--spark' %}{% elif t == 'meta' %}{% set typeClass = 'pill--meta' %}{% endif %}\n    <div class=\"flex items-start justify-between\">\n      {% if item.data.type %}<span class=\"pill {{ typeClass }}\">{{ item.data.type | capitalize }}</span>{% endif %}\n      {% if item.date %}<time datetime=\"{{ item.date | htmlDateString }}\" class=\"text-[0.7rem] opacity-90\">{{ item.date | readableDate }}</time>{% endif %}\n    </div>\n    <h3 class=\"font-heading text-base-content text-lg leading-tight group-hover:text-primary transition-colors\">{{ item.data.title }}</h3>\n    {% if item.data.description %}<p class=\"text-sm text-base-content/90\">{{ item.data.description | truncate(120) }}</p>{% endif %}\n    <div class=\"mt-1 flex items-center justify-between text-xs text-base-content/70\">\n      {% if item.data.status %}<span class=\"capitalize\">[{{ item.data.status }}]</span>{% endif %}\n    </div>\n  </div>\n</a>\n{% endmacro %}\n"
}
