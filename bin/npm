#!/usr/bin/env bash
# Repo-local npm shim: transparent pass-through.
set -euo pipefail
orig_args=("$@")

shim_dir="$(cd "$(dirname "$0")" && pwd)"
IFS=':' read -r -a path_parts <<< "$PATH"
real=""
for d in "${path_parts[@]}"; do
  [[ "$d" == "$shim_dir" ]] && continue
  if [[ -x "$d/npm" ]]; then
    real="$d/npm"
    break
  fi
done
exec "${real:-/usr/bin/npm}" "${orig_args[@]}"
