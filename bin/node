#!/usr/bin/env bash
set -euo pipefail
. "$(cd "$(dirname "$0")" && pwd)/_lib.sh"

PATH_WITHOUT_REPO_BIN="$(path_without_repo_bin)"
REAL_NODE=""
if [[ -n "$PATH_WITHOUT_REPO_BIN" ]]; then
  REAL_NODE="$(PATH="$PATH_WITHOUT_REPO_BIN" command -v node 2>/dev/null || true)"
fi

if [[ -z "$REAL_NODE" ]]; then
  echo "node binary not found" >&2
  exit 127
fi

exec "$REAL_NODE" "$@"
